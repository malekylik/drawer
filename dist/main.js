/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/assets/circle-pixel.glsl":
/*!**************************************!*\
  !*** ./src/assets/circle-pixel.glsl ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"#version 300 es\\n\\nprecision mediump float;\\n\\nin vec2 textureCoord;\\n\\nout vec4 fragColor;\\n\\nvoid main()\\n{\\n  vec2 textureCoordOffset = vec2(textureCoord) * 2.0;\\n  textureCoordOffset.x -= 1.0;\\n  textureCoordOffset.y -= 1.0;\\n\\n  float squareDist = 1.0 - length(textureCoordOffset);\\n\\n  // TODO: why is not bleended\\n  // float smoothes = smoothstep(0.0, 0.005, squareDist);\\n  float smoothes = 1.0;\\n  float coef = step(0.0, squareDist) * smoothes;\\n\\n  if (coef == 0.0) {\\n    discard;\\n  }\\n\\n  fragColor = vec4(1.0, 1.0, 1.0, coef);\\n}\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXNzZXRzL2NpcmNsZS1waXhlbC5nbHNsLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSw0Q0FBNEMseUJBQXlCLHVCQUF1QixrQkFBa0IsdURBQXVELGdDQUFnQyxnQ0FBZ0MsMERBQTBELDZGQUE2Rix5QkFBeUIsa0RBQWtELHdCQUF3QixjQUFjLEtBQUssNENBQTRDLEdBQUcsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9hc3NldHMvY2lyY2xlLXBpeGVsLmdsc2w/YmVmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIiN2ZXJzaW9uIDMwMCBlc1xcblxcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcblxcbmluIHZlYzIgdGV4dHVyZUNvb3JkO1xcblxcbm91dCB2ZWM0IGZyYWdDb2xvcjtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gIHZlYzIgdGV4dHVyZUNvb3JkT2Zmc2V0ID0gdmVjMih0ZXh0dXJlQ29vcmQpICogMi4wO1xcbiAgdGV4dHVyZUNvb3JkT2Zmc2V0LnggLT0gMS4wO1xcbiAgdGV4dHVyZUNvb3JkT2Zmc2V0LnkgLT0gMS4wO1xcblxcbiAgZmxvYXQgc3F1YXJlRGlzdCA9IDEuMCAtIGxlbmd0aCh0ZXh0dXJlQ29vcmRPZmZzZXQpO1xcblxcbiAgLy8gVE9ETzogd2h5IGlzIG5vdCBibGVlbmRlZFxcbiAgLy8gZmxvYXQgc21vb3RoZXMgPSBzbW9vdGhzdGVwKDAuMCwgMC4wMDUsIHNxdWFyZURpc3QpO1xcbiAgZmxvYXQgc21vb3RoZXMgPSAxLjA7XFxuICBmbG9hdCBjb2VmID0gc3RlcCgwLjAsIHNxdWFyZURpc3QpICogc21vb3RoZXM7XFxuXFxuICBpZiAoY29lZiA9PSAwLjApIHtcXG4gICAgZGlzY2FyZDtcXG4gIH1cXG5cXG4gIGZyYWdDb2xvciA9IHZlYzQoMS4wLCAxLjAsIDEuMCwgY29lZik7XFxufVxcblwiOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/assets/circle-pixel.glsl\n");

/***/ }),

/***/ "./src/assets/circle-vertex.glsl":
/*!***************************************!*\
  !*** ./src/assets/circle-vertex.glsl ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"#version 300 es\\n\\nuniform mat4x4 P;\\nuniform mat4x4 MV;\\nuniform mat4x4 MM;\\n\\nlayout(location = 0) in vec3 vPosition;\\nlayout(location = 1) in vec2 vTextureCoord;\\n\\nout vec2 textureCoord;\\n\\nvoid main()\\n{\\n  gl_Position = P * inverse(MV) * MM * vec4(vPosition, 1.0);\\n\\n  textureCoord = vTextureCoord;\\n\\n  // radius = vRadius;\\n}\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXNzZXRzL2NpcmNsZS12ZXJ0ZXguZ2xzbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUscUNBQXFDLG9CQUFvQixvQkFBb0IsMkNBQTJDLDZDQUE2QywwQkFBMEIsa0JBQWtCLDhEQUE4RCxtQ0FBbUMsMEJBQTBCLEdBQUcsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9hc3NldHMvY2lyY2xlLXZlcnRleC5nbHNsPzVmZDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIjdmVyc2lvbiAzMDAgZXNcXG5cXG51bmlmb3JtIG1hdDR4NCBQO1xcbnVuaWZvcm0gbWF0NHg0IE1WO1xcbnVuaWZvcm0gbWF0NHg0IE1NO1xcblxcbmxheW91dChsb2NhdGlvbiA9IDApIGluIHZlYzMgdlBvc2l0aW9uO1xcbmxheW91dChsb2NhdGlvbiA9IDEpIGluIHZlYzIgdlRleHR1cmVDb29yZDtcXG5cXG5vdXQgdmVjMiB0ZXh0dXJlQ29vcmQ7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICBnbF9Qb3NpdGlvbiA9IFAgKiBpbnZlcnNlKE1WKSAqIE1NICogdmVjNCh2UG9zaXRpb24sIDEuMCk7XFxuXFxuICB0ZXh0dXJlQ29vcmQgPSB2VGV4dHVyZUNvb3JkO1xcblxcbiAgLy8gcmFkaXVzID0gdlJhZGl1cztcXG59XFxuXCI7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/assets/circle-vertex.glsl\n");

/***/ }),

/***/ "./src/assets/line-pixel.glsl":
/*!************************************!*\
  !*** ./src/assets/line-pixel.glsl ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"#version 300 es\\n\\nprecision mediump float;\\n\\nout vec4 fragColor;\\n\\nvoid main()\\n{\\n  fragColor = vec4(1.0, 1.0, 1.0, 1.0);\\n}\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXNzZXRzL2xpbmUtcGl4ZWwuZ2xzbC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsNENBQTRDLHVCQUF1QixrQkFBa0IseUNBQXlDLEdBQUcsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9hc3NldHMvbGluZS1waXhlbC5nbHNsPzMyZmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIjdmVyc2lvbiAzMDAgZXNcXG5cXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG5cXG5vdXQgdmVjNCBmcmFnQ29sb3I7XFxuXFxudm9pZCBtYWluKClcXG57XFxuICBmcmFnQ29sb3IgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XFxufVxcblwiOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/assets/line-pixel.glsl\n");

/***/ }),

/***/ "./src/assets/line-vertex.glsl":
/*!*************************************!*\
  !*** ./src/assets/line-vertex.glsl ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"#version 300 es\\n\\nuniform mat4x4 P;\\nuniform mat4x4 MV;\\nuniform mat4x4 MM;\\n\\nlayout(location = 0) in vec3 vPosition;\\n\\nvoid main()\\n{\\n  gl_Position = P * inverse(MV) * MM * vec4(vPosition, 1.0);\\n}\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXNzZXRzL2xpbmUtdmVydGV4Lmdsc2wuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLHFDQUFxQyxvQkFBb0Isb0JBQW9CLDJDQUEyQyxrQkFBa0IsOERBQThELEdBQUcsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9hc3NldHMvbGluZS12ZXJ0ZXguZ2xzbD9hM2E2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiI3ZlcnNpb24gMzAwIGVzXFxuXFxudW5pZm9ybSBtYXQ0eDQgUDtcXG51bmlmb3JtIG1hdDR4NCBNVjtcXG51bmlmb3JtIG1hdDR4NCBNTTtcXG5cXG5sYXlvdXQobG9jYXRpb24gPSAwKSBpbiB2ZWMzIHZQb3NpdGlvbjtcXG5cXG52b2lkIG1haW4oKVxcbntcXG4gIGdsX1Bvc2l0aW9uID0gUCAqIGludmVyc2UoTVYpICogTU0gKiB2ZWM0KHZQb3NpdGlvbiwgMS4wKTtcXG59XFxuXCI7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/assets/line-vertex.glsl\n");

/***/ }),

/***/ "./src/event/canvas-event.ts":
/*!***********************************!*\
  !*** ./src/event/canvas-event.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.bindEvents = void 0;\nconst screen_1 = __webpack_require__(/*! ../math/screen */ \"./src/math/screen.ts\");\nconst vec_1 = __webpack_require__(/*! ../math/vec */ \"./src/math/vec.ts\");\n// Aircraft_principal_axes\nfunction bindEvents(canvas, cameraPosition, paitingLayer, screenWidth, screenHeight, fovy, aspect) {\n    const eventStack = [];\n    const keyboard = new Uint8Array(128);\n    canvas.addEventListener('keydown', (e) => {\n        if (e.key.charCodeAt(0) < 128) {\n            keyboard[e.key.charCodeAt(0)] = 1;\n        }\n        eventStack.push({\n            type: 'keydown',\n            keyCode: e.key.charCodeAt(0),\n            key: e.key,\n        });\n    });\n    canvas.addEventListener('keyup', (e) => {\n        if (e.key.charCodeAt(0) < 128) {\n            keyboard[e.key.charCodeAt(0)] = 0;\n        }\n        eventStack.push({\n            type: 'keyup',\n            keyCode: e.key.charCodeAt(0),\n            key: e.key,\n        });\n    });\n    canvas.addEventListener('keypress', (e) => {\n        eventStack.push({\n            type: 'keypress',\n            keyCode: -1,\n            key: e.key,\n        });\n    });\n    canvas.addEventListener('mousedown', (e) => {\n        const coord = (0, vec_1.createVec2)(e.offsetX, e.offsetY);\n        (0, screen_1.convertScreenCoordToWorldCoord)(coord, cameraPosition, paitingLayer, screenWidth, screenHeight, fovy, aspect);\n        eventStack.push({\n            type: 'mousedown',\n            x: coord.x,\n            y: coord.y,\n        });\n    });\n    canvas.addEventListener('mousemove', (e) => {\n        const coord = (0, vec_1.createVec2)(e.offsetX, e.offsetY);\n        (0, screen_1.convertScreenCoordToWorldCoord)(coord, cameraPosition, paitingLayer, screenWidth, screenHeight, fovy, aspect);\n        eventStack.push({\n            type: 'mousemove',\n            x: coord.x,\n            y: coord.y,\n        });\n    });\n    canvas.addEventListener('mouseup', (e) => {\n        const coord = (0, vec_1.createVec2)(e.offsetX, e.offsetY);\n        (0, screen_1.convertScreenCoordToWorldCoord)(coord, cameraPosition, paitingLayer, screenWidth, screenHeight, fovy, aspect);\n        eventStack.push({\n            type: 'mouseup',\n            x: coord.x,\n            y: coord.y,\n        });\n    });\n    return { eventStack, keyboard };\n}\nexports.bindEvents = bindEvents;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZlbnQvY2FudmFzLWV2ZW50LnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQjtBQUNsQixpQkFBaUIsbUJBQU8sQ0FBQyw0Q0FBZ0I7QUFDekMsY0FBYyxtQkFBTyxDQUFDLHNDQUFhO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0wsYUFBYTtBQUNiO0FBQ0Esa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhd2VyLy4vc3JjL2V2ZW50L2NhbnZhcy1ldmVudC50cz9hYWQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5iaW5kRXZlbnRzID0gdm9pZCAwO1xuY29uc3Qgc2NyZWVuXzEgPSByZXF1aXJlKFwiLi4vbWF0aC9zY3JlZW5cIik7XG5jb25zdCB2ZWNfMSA9IHJlcXVpcmUoXCIuLi9tYXRoL3ZlY1wiKTtcbi8vIEFpcmNyYWZ0X3ByaW5jaXBhbF9heGVzXG5mdW5jdGlvbiBiaW5kRXZlbnRzKGNhbnZhcywgY2FtZXJhUG9zaXRpb24sIHBhaXRpbmdMYXllciwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCwgZm92eSwgYXNwZWN0KSB7XG4gICAgY29uc3QgZXZlbnRTdGFjayA9IFtdO1xuICAgIGNvbnN0IGtleWJvYXJkID0gbmV3IFVpbnQ4QXJyYXkoMTI4KTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLmtleS5jaGFyQ29kZUF0KDApIDwgMTI4KSB7XG4gICAgICAgICAgICBrZXlib2FyZFtlLmtleS5jaGFyQ29kZUF0KDApXSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRTdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdrZXlkb3duJyxcbiAgICAgICAgICAgIGtleUNvZGU6IGUua2V5LmNoYXJDb2RlQXQoMCksXG4gICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkuY2hhckNvZGVBdCgwKSA8IDEyOCkge1xuICAgICAgICAgICAga2V5Ym9hcmRbZS5rZXkuY2hhckNvZGVBdCgwKV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50U3RhY2sucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAna2V5dXAnLFxuICAgICAgICAgICAga2V5Q29kZTogZS5rZXkuY2hhckNvZGVBdCgwKSxcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICAgIGV2ZW50U3RhY2sucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAna2V5cHJlc3MnLFxuICAgICAgICAgICAga2V5Q29kZTogLTEsXG4gICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgY29vcmQgPSAoMCwgdmVjXzEuY3JlYXRlVmVjMikoZS5vZmZzZXRYLCBlLm9mZnNldFkpO1xuICAgICAgICAoMCwgc2NyZWVuXzEuY29udmVydFNjcmVlbkNvb3JkVG9Xb3JsZENvb3JkKShjb29yZCwgY2FtZXJhUG9zaXRpb24sIHBhaXRpbmdMYXllciwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCwgZm92eSwgYXNwZWN0KTtcbiAgICAgICAgZXZlbnRTdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdtb3VzZWRvd24nLFxuICAgICAgICAgICAgeDogY29vcmQueCxcbiAgICAgICAgICAgIHk6IGNvb3JkLnksXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBjb29yZCA9ICgwLCB2ZWNfMS5jcmVhdGVWZWMyKShlLm9mZnNldFgsIGUub2Zmc2V0WSk7XG4gICAgICAgICgwLCBzY3JlZW5fMS5jb252ZXJ0U2NyZWVuQ29vcmRUb1dvcmxkQ29vcmQpKGNvb3JkLCBjYW1lcmFQb3NpdGlvbiwgcGFpdGluZ0xheWVyLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0LCBmb3Z5LCBhc3BlY3QpO1xuICAgICAgICBldmVudFN0YWNrLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ21vdXNlbW92ZScsXG4gICAgICAgICAgICB4OiBjb29yZC54LFxuICAgICAgICAgICAgeTogY29vcmQueSxcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBjb29yZCA9ICgwLCB2ZWNfMS5jcmVhdGVWZWMyKShlLm9mZnNldFgsIGUub2Zmc2V0WSk7XG4gICAgICAgICgwLCBzY3JlZW5fMS5jb252ZXJ0U2NyZWVuQ29vcmRUb1dvcmxkQ29vcmQpKGNvb3JkLCBjYW1lcmFQb3NpdGlvbiwgcGFpdGluZ0xheWVyLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0LCBmb3Z5LCBhc3BlY3QpO1xuICAgICAgICBldmVudFN0YWNrLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ21vdXNldXAnLFxuICAgICAgICAgICAgeDogY29vcmQueCxcbiAgICAgICAgICAgIHk6IGNvb3JkLnksXG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB7IGV2ZW50U3RhY2ssIGtleWJvYXJkIH07XG59XG5leHBvcnRzLmJpbmRFdmVudHMgPSBiaW5kRXZlbnRzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/event/canvas-event.ts\n");

/***/ }),

/***/ "./src/event/const.ts":
/*!****************************!*\
  !*** ./src/event/const.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.KeyboardKeyCode = void 0;\nvar KeyboardKeyCode;\n(function (KeyboardKeyCode) {\n    KeyboardKeyCode[KeyboardKeyCode[\"spaceKey\"] = 32] = \"spaceKey\";\n    KeyboardKeyCode[KeyboardKeyCode[\"aKey\"] = 97] = \"aKey\";\n    KeyboardKeyCode[KeyboardKeyCode[\"dKey\"] = 100] = \"dKey\";\n    KeyboardKeyCode[KeyboardKeyCode[\"sKey\"] = 115] = \"sKey\";\n    KeyboardKeyCode[KeyboardKeyCode[\"wKey\"] = 119] = \"wKey\";\n    KeyboardKeyCode[KeyboardKeyCode[\"zKey\"] = 122] = \"zKey\";\n})(KeyboardKeyCode = exports.KeyboardKeyCode || (exports.KeyboardKeyCode = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZlbnQvY29uc3QudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdEQUFnRCx1QkFBdUIsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9ldmVudC9jb25zdC50cz9iMTQyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5LZXlib2FyZEtleUNvZGUgPSB2b2lkIDA7XG52YXIgS2V5Ym9hcmRLZXlDb2RlO1xuKGZ1bmN0aW9uIChLZXlib2FyZEtleUNvZGUpIHtcbiAgICBLZXlib2FyZEtleUNvZGVbS2V5Ym9hcmRLZXlDb2RlW1wic3BhY2VLZXlcIl0gPSAzMl0gPSBcInNwYWNlS2V5XCI7XG4gICAgS2V5Ym9hcmRLZXlDb2RlW0tleWJvYXJkS2V5Q29kZVtcImFLZXlcIl0gPSA5N10gPSBcImFLZXlcIjtcbiAgICBLZXlib2FyZEtleUNvZGVbS2V5Ym9hcmRLZXlDb2RlW1wiZEtleVwiXSA9IDEwMF0gPSBcImRLZXlcIjtcbiAgICBLZXlib2FyZEtleUNvZGVbS2V5Ym9hcmRLZXlDb2RlW1wic0tleVwiXSA9IDExNV0gPSBcInNLZXlcIjtcbiAgICBLZXlib2FyZEtleUNvZGVbS2V5Ym9hcmRLZXlDb2RlW1wid0tleVwiXSA9IDExOV0gPSBcIndLZXlcIjtcbiAgICBLZXlib2FyZEtleUNvZGVbS2V5Ym9hcmRLZXlDb2RlW1wiektleVwiXSA9IDEyMl0gPSBcInpLZXlcIjtcbn0pKEtleWJvYXJkS2V5Q29kZSA9IGV4cG9ydHMuS2V5Ym9hcmRLZXlDb2RlIHx8IChleHBvcnRzLktleWJvYXJkS2V5Q29kZSA9IHt9KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/event/const.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst vec_1 = __webpack_require__(/*! ./math/vec */ \"./src/math/vec.ts\");\nconst matix_1 = __webpack_require__(/*! ./math/matix */ \"./src/math/matix.ts\");\nconst utils_1 = __webpack_require__(/*! ./math/utils */ \"./src/math/utils.ts\");\nconst screen_1 = __webpack_require__(/*! ./math/screen */ \"./src/math/screen.ts\");\nconst canvas_event_1 = __webpack_require__(/*! ./event/canvas-event */ \"./src/event/canvas-event.ts\");\nconst const_1 = __webpack_require__(/*! ./event/const */ \"./src/event/const.ts\");\nconst renderer_1 = __webpack_require__(/*! ./render/renderer */ \"./src/render/renderer.ts\");\nconst components_1 = __webpack_require__(/*! ./render/components */ \"./src/render/components.ts\");\nconst const_2 = __webpack_require__(/*! ./render/const */ \"./src/render/const.ts\");\nvar DrawMode;\n(function (DrawMode) {\n    DrawMode[\"line\"] = \"line\";\n    DrawMode[\"circle\"] = \"circle\";\n})(DrawMode || (DrawMode = {}));\nlet mode = DrawMode.line; // line circle\nconst lines = [];\nconst circles = [];\nconst screenWidth = 600;\nconst screenHeight = 400;\nconst canvas = document.getElementById('canvas');\ncanvas.width = screenWidth;\ncanvas.height = screenHeight;\ncanvas.style.width = `${screenWidth}px`;\ncanvas.style.height = `${screenHeight}px`;\nconst gl = canvas.getContext('webgl2', { antialias: false });\nconst renderer = new renderer_1.Renderer(gl, screenWidth, screenHeight);\nconst near = 0.1;\nconst far = 10.0;\nconst fovy = (0, utils_1.toRadians)(45);\nconst aspect = screenWidth / screenHeight;\nconst cameraPosition = (0, vec_1.createVec3)(0, 0, 0);\nconst { keyboard, eventStack } = (0, canvas_event_1.bindEvents)(canvas, cameraPosition, const_2.paitingLayer, screenWidth, screenHeight, fovy, aspect);\nlet drawingLine = false;\nlet drawingCirle = false;\nlet lineCount = 0;\nfunction updateCamera() {\n    // TODO: use function\n    // TODO: make it slow when it goes closer to near\n    let updateValue = Math.sin((0, utils_1.toRadians)(((cameraPosition.z + 2.8) / 9.0 * 8.0) + 270.0 + 11.0)) + 1.0;\n    updateValue = Math.max(updateValue, 0.005);\n    // -2.9\n    if (keyboard[const_1.KeyboardKeyCode.wKey]) {\n        cameraPosition.z = cameraPosition.z - updateValue < -2.8 ? -2.8 : cameraPosition.z - updateValue;\n    }\n    // 6.0\n    if (keyboard[const_1.KeyboardKeyCode.sKey]) {\n        cameraPosition.z = cameraPosition.z + updateValue > 6.0 ? 6.0 : cameraPosition.z + updateValue;\n    }\n    // updateValue = updateValue !== 0.1 ? updateValue * 2 : updateValue;\n    if (keyboard[const_1.KeyboardKeyCode.dKey]) {\n        cameraPosition.x += updateValue;\n    }\n    if (keyboard[const_1.KeyboardKeyCode.aKey]) {\n        cameraPosition.x -= updateValue;\n    }\n    if (keyboard[const_1.KeyboardKeyCode.spaceKey]) {\n        cameraPosition.y += updateValue;\n    }\n    if (keyboard[const_1.KeyboardKeyCode.zKey]) {\n        cameraPosition.y -= updateValue;\n    }\n}\nfunction renderLines() {\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        renderer.drawLine(line);\n    }\n    for (let i = 0; i < lines.length - 1; i++) {\n        const line = lines[i];\n        const nextLines = lines[i + 1];\n        if (line.line === nextLines.line) {\n            const circle = {\n                originX: nextLines.start.x, originY: nextLines.start.y, radius: 0.1 / 2\n            };\n            renderer.drawCircle(circle);\n        }\n    }\n}\nfunction renderCircles() {\n    for (let i = 0; i < circles.length; i++) {\n        const circle = circles[i];\n        renderer.drawCircle(circle);\n    }\n}\nfunction handleEvents() {\n    let i = 0;\n    while (i < eventStack.length) {\n        const event = eventStack[i];\n        if (mode === DrawMode.line) {\n            if (event.type === 'mousedown' && !drawingLine) {\n                drawingLine = true;\n                const length = 0.01;\n                lines.push((0, components_1.createLine)((0, vec_1.createVec2)(event.x, event.y), length));\n                lines[lines.length - 1].line = lineCount;\n            }\n            else if (event.type === 'mousedown' && drawingLine) {\n                const lastLine = lines[lines.length - 1];\n                const lengthX = event.x - lastLine.start.x;\n                const lengthY = event.y - lastLine.start.y;\n                let angle = (0, screen_1.getAngleFromLineProjection)(lengthX, lengthY);\n                let lineLength = 0.0;\n                if (angle === 90 || angle === 270) {\n                    lineLength = lengthY;\n                }\n                else {\n                    lineLength = (lengthX) / Math.cos((0, utils_1.toRadians)(angle));\n                }\n                // TODO: find out linear transformation, transform screen cordination to world\n                lastLine.length = lineLength;\n                lastLine.rotate = angle;\n                const length = 0.01;\n                lines.push((0, components_1.createLine)((0, vec_1.createVec2)(event.x, event.y), length));\n                lines[lines.length - 1].line = lineCount;\n            }\n            if (event.type === 'mousemove' && drawingLine) {\n                const lastLine = lines[lines.length - 1];\n                const lengthX = event.x - lastLine.start.x;\n                const lengthY = event.y - lastLine.start.y;\n                let angle = (0, screen_1.getAngleFromLineProjection)(lengthX, lengthY);\n                let lineLength = 0.0;\n                if (angle === 90 || angle === 270) {\n                    lineLength = lengthY;\n                }\n                else {\n                    lineLength = (lengthX) / Math.cos((0, utils_1.toRadians)(angle));\n                }\n                // TODO: find out linear transformation, transform screen cordination to world\n                lastLine.length = lineLength;\n                lastLine.rotate = angle;\n            }\n            if (event.type === 'keypress' && event.key === 'Enter' && drawingLine) {\n                drawingLine = false;\n                lines.pop();\n                lineCount += 1;\n            }\n        }\n        if (mode === DrawMode.circle) {\n            if (event.type === 'mousedown' && !drawingCirle) {\n                circles.push({\n                    originX: event.x, originY: event.y,\n                    radius: 0.1\n                });\n                drawingCirle = true;\n            }\n            if (event.type === 'mousemove' && drawingCirle) {\n                circles.push({\n                    originX: event.x, originY: event.y,\n                    radius: 0.1\n                });\n            }\n            if (event.type === 'mouseup' && drawingCirle) {\n                drawingCirle = false;\n            }\n        }\n        i++;\n    }\n    let length = eventStack.length;\n    for (let i = 0; i < length; i++) {\n        eventStack.pop();\n    }\n}\nlet cancel = null;\n// TODO: check with glm about transpose projection\nconst projectionMatrix = ((0, matix_1.createPerspectiveMatrix)(fovy, aspect, near, far));\nfunction loop() {\n    cancel = requestAnimationFrame(loop);\n    handleEvents();\n    let viewMatrix = (0, matix_1.createUnitMatrix)(1.0);\n    viewMatrix = (0, matix_1.multiplyMatrix)(viewMatrix, (0, matix_1.createRotationMatrix)(0, 0, 0)); // rotate\n    viewMatrix = (0, matix_1.multiplyMatrix)(viewMatrix, (0, matix_1.createTranslationMatrix)(cameraPosition.x, cameraPosition.y, cameraPosition.z)); // translate\n    updateCamera();\n    renderer.beginScene(projectionMatrix, (0, matix_1.transposeMatrix)(viewMatrix));\n    renderLines();\n    renderCircles();\n    renderer.endScene();\n}\n// setTimeout(() => {\n//   cancelAnimationFrame(cancel);\n// }, 3000);\nloop();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxjQUFjLG1CQUFPLENBQUMscUNBQVk7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMseUNBQWM7QUFDdEMsZ0JBQWdCLG1CQUFPLENBQUMseUNBQWM7QUFDdEMsaUJBQWlCLG1CQUFPLENBQUMsMkNBQWU7QUFDeEMsdUJBQXVCLG1CQUFPLENBQUMseURBQXNCO0FBQ3JELGdCQUFnQixtQkFBTyxDQUFDLDJDQUFlO0FBQ3ZDLG1CQUFtQixtQkFBTyxDQUFDLG1EQUFtQjtBQUM5QyxxQkFBcUIsbUJBQU8sQ0FBQyx1REFBcUI7QUFDbEQsZ0JBQWdCLG1CQUFPLENBQUMsNkNBQWdCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7QUFDN0IsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEMseUJBQXlCLGFBQWE7QUFDdEMseUNBQXlDLGtCQUFrQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVCQUF1QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHO0FBQ3RHLHNKQUFzSjtBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhd2VyLy4vc3JjL21haW4udHM/MzRkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHZlY18xID0gcmVxdWlyZShcIi4vbWF0aC92ZWNcIik7XG5jb25zdCBtYXRpeF8xID0gcmVxdWlyZShcIi4vbWF0aC9tYXRpeFwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi9tYXRoL3V0aWxzXCIpO1xuY29uc3Qgc2NyZWVuXzEgPSByZXF1aXJlKFwiLi9tYXRoL3NjcmVlblwiKTtcbmNvbnN0IGNhbnZhc19ldmVudF8xID0gcmVxdWlyZShcIi4vZXZlbnQvY2FudmFzLWV2ZW50XCIpO1xuY29uc3QgY29uc3RfMSA9IHJlcXVpcmUoXCIuL2V2ZW50L2NvbnN0XCIpO1xuY29uc3QgcmVuZGVyZXJfMSA9IHJlcXVpcmUoXCIuL3JlbmRlci9yZW5kZXJlclwiKTtcbmNvbnN0IGNvbXBvbmVudHNfMSA9IHJlcXVpcmUoXCIuL3JlbmRlci9jb21wb25lbnRzXCIpO1xuY29uc3QgY29uc3RfMiA9IHJlcXVpcmUoXCIuL3JlbmRlci9jb25zdFwiKTtcbnZhciBEcmF3TW9kZTtcbihmdW5jdGlvbiAoRHJhd01vZGUpIHtcbiAgICBEcmF3TW9kZVtcImxpbmVcIl0gPSBcImxpbmVcIjtcbiAgICBEcmF3TW9kZVtcImNpcmNsZVwiXSA9IFwiY2lyY2xlXCI7XG59KShEcmF3TW9kZSB8fCAoRHJhd01vZGUgPSB7fSkpO1xubGV0IG1vZGUgPSBEcmF3TW9kZS5saW5lOyAvLyBsaW5lIGNpcmNsZVxuY29uc3QgbGluZXMgPSBbXTtcbmNvbnN0IGNpcmNsZXMgPSBbXTtcbmNvbnN0IHNjcmVlbldpZHRoID0gNjAwO1xuY29uc3Qgc2NyZWVuSGVpZ2h0ID0gNDAwO1xuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpO1xuY2FudmFzLndpZHRoID0gc2NyZWVuV2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gc2NyZWVuSGVpZ2h0O1xuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7c2NyZWVuV2lkdGh9cHhgO1xuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke3NjcmVlbkhlaWdodH1weGA7XG5jb25zdCBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCB7IGFudGlhbGlhczogZmFsc2UgfSk7XG5jb25zdCByZW5kZXJlciA9IG5ldyByZW5kZXJlcl8xLlJlbmRlcmVyKGdsLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KTtcbmNvbnN0IG5lYXIgPSAwLjE7XG5jb25zdCBmYXIgPSAxMC4wO1xuY29uc3QgZm92eSA9ICgwLCB1dGlsc18xLnRvUmFkaWFucykoNDUpO1xuY29uc3QgYXNwZWN0ID0gc2NyZWVuV2lkdGggLyBzY3JlZW5IZWlnaHQ7XG5jb25zdCBjYW1lcmFQb3NpdGlvbiA9ICgwLCB2ZWNfMS5jcmVhdGVWZWMzKSgwLCAwLCAwKTtcbmNvbnN0IHsga2V5Ym9hcmQsIGV2ZW50U3RhY2sgfSA9ICgwLCBjYW52YXNfZXZlbnRfMS5iaW5kRXZlbnRzKShjYW52YXMsIGNhbWVyYVBvc2l0aW9uLCBjb25zdF8yLnBhaXRpbmdMYXllciwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCwgZm92eSwgYXNwZWN0KTtcbmxldCBkcmF3aW5nTGluZSA9IGZhbHNlO1xubGV0IGRyYXdpbmdDaXJsZSA9IGZhbHNlO1xubGV0IGxpbmVDb3VudCA9IDA7XG5mdW5jdGlvbiB1cGRhdGVDYW1lcmEoKSB7XG4gICAgLy8gVE9ETzogdXNlIGZ1bmN0aW9uXG4gICAgLy8gVE9ETzogbWFrZSBpdCBzbG93IHdoZW4gaXQgZ29lcyBjbG9zZXIgdG8gbmVhclxuICAgIGxldCB1cGRhdGVWYWx1ZSA9IE1hdGguc2luKCgwLCB1dGlsc18xLnRvUmFkaWFucykoKChjYW1lcmFQb3NpdGlvbi56ICsgMi44KSAvIDkuMCAqIDguMCkgKyAyNzAuMCArIDExLjApKSArIDEuMDtcbiAgICB1cGRhdGVWYWx1ZSA9IE1hdGgubWF4KHVwZGF0ZVZhbHVlLCAwLjAwNSk7XG4gICAgLy8gLTIuOVxuICAgIGlmIChrZXlib2FyZFtjb25zdF8xLktleWJvYXJkS2V5Q29kZS53S2V5XSkge1xuICAgICAgICBjYW1lcmFQb3NpdGlvbi56ID0gY2FtZXJhUG9zaXRpb24ueiAtIHVwZGF0ZVZhbHVlIDwgLTIuOCA/IC0yLjggOiBjYW1lcmFQb3NpdGlvbi56IC0gdXBkYXRlVmFsdWU7XG4gICAgfVxuICAgIC8vIDYuMFxuICAgIGlmIChrZXlib2FyZFtjb25zdF8xLktleWJvYXJkS2V5Q29kZS5zS2V5XSkge1xuICAgICAgICBjYW1lcmFQb3NpdGlvbi56ID0gY2FtZXJhUG9zaXRpb24ueiArIHVwZGF0ZVZhbHVlID4gNi4wID8gNi4wIDogY2FtZXJhUG9zaXRpb24ueiArIHVwZGF0ZVZhbHVlO1xuICAgIH1cbiAgICAvLyB1cGRhdGVWYWx1ZSA9IHVwZGF0ZVZhbHVlICE9PSAwLjEgPyB1cGRhdGVWYWx1ZSAqIDIgOiB1cGRhdGVWYWx1ZTtcbiAgICBpZiAoa2V5Ym9hcmRbY29uc3RfMS5LZXlib2FyZEtleUNvZGUuZEtleV0pIHtcbiAgICAgICAgY2FtZXJhUG9zaXRpb24ueCArPSB1cGRhdGVWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGtleWJvYXJkW2NvbnN0XzEuS2V5Ym9hcmRLZXlDb2RlLmFLZXldKSB7XG4gICAgICAgIGNhbWVyYVBvc2l0aW9uLnggLT0gdXBkYXRlVmFsdWU7XG4gICAgfVxuICAgIGlmIChrZXlib2FyZFtjb25zdF8xLktleWJvYXJkS2V5Q29kZS5zcGFjZUtleV0pIHtcbiAgICAgICAgY2FtZXJhUG9zaXRpb24ueSArPSB1cGRhdGVWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGtleWJvYXJkW2NvbnN0XzEuS2V5Ym9hcmRLZXlDb2RlLnpLZXldKSB7XG4gICAgICAgIGNhbWVyYVBvc2l0aW9uLnkgLT0gdXBkYXRlVmFsdWU7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVuZGVyTGluZXMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgIHJlbmRlcmVyLmRyYXdMaW5lKGxpbmUpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgICAgIGNvbnN0IG5leHRMaW5lcyA9IGxpbmVzW2kgKyAxXTtcbiAgICAgICAgaWYgKGxpbmUubGluZSA9PT0gbmV4dExpbmVzLmxpbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNpcmNsZSA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5YOiBuZXh0TGluZXMuc3RhcnQueCwgb3JpZ2luWTogbmV4dExpbmVzLnN0YXJ0LnksIHJhZGl1czogMC4xIC8gMlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlbmRlcmVyLmRyYXdDaXJjbGUoY2lyY2xlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHJlbmRlckNpcmNsZXMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaXJjbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNpcmNsZSA9IGNpcmNsZXNbaV07XG4gICAgICAgIHJlbmRlcmVyLmRyYXdDaXJjbGUoY2lyY2xlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYW5kbGVFdmVudHMoKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgZXZlbnRTdGFjay5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBldmVudFN0YWNrW2ldO1xuICAgICAgICBpZiAobW9kZSA9PT0gRHJhd01vZGUubGluZSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmICFkcmF3aW5nTGluZSkge1xuICAgICAgICAgICAgICAgIGRyYXdpbmdMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSAwLjAxO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goKDAsIGNvbXBvbmVudHNfMS5jcmVhdGVMaW5lKSgoMCwgdmVjXzEuY3JlYXRlVmVjMikoZXZlbnQueCwgZXZlbnQueSksIGxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxpbmUgPSBsaW5lQ291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09PSAnbW91c2Vkb3duJyAmJiBkcmF3aW5nTGluZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMaW5lID0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoWCA9IGV2ZW50LnggLSBsYXN0TGluZS5zdGFydC54O1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aFkgPSBldmVudC55IC0gbGFzdExpbmUuc3RhcnQueTtcbiAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSAoMCwgc2NyZWVuXzEuZ2V0QW5nbGVGcm9tTGluZVByb2plY3Rpb24pKGxlbmd0aFgsIGxlbmd0aFkpO1xuICAgICAgICAgICAgICAgIGxldCBsaW5lTGVuZ3RoID0gMC4wO1xuICAgICAgICAgICAgICAgIGlmIChhbmdsZSA9PT0gOTAgfHwgYW5nbGUgPT09IDI3MCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lTGVuZ3RoID0gbGVuZ3RoWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVMZW5ndGggPSAobGVuZ3RoWCkgLyBNYXRoLmNvcygoMCwgdXRpbHNfMS50b1JhZGlhbnMpKGFuZ2xlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGZpbmQgb3V0IGxpbmVhciB0cmFuc2Zvcm1hdGlvbiwgdHJhbnNmb3JtIHNjcmVlbiBjb3JkaW5hdGlvbiB0byB3b3JsZFxuICAgICAgICAgICAgICAgIGxhc3RMaW5lLmxlbmd0aCA9IGxpbmVMZW5ndGg7XG4gICAgICAgICAgICAgICAgbGFzdExpbmUucm90YXRlID0gYW5nbGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gMC4wMTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKCgwLCBjb21wb25lbnRzXzEuY3JlYXRlTGluZSkoKDAsIHZlY18xLmNyZWF0ZVZlYzIpKGV2ZW50LngsIGV2ZW50LnkpLCBsZW5ndGgpKTtcbiAgICAgICAgICAgICAgICBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5saW5lID0gbGluZUNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZW1vdmUnICYmIGRyYXdpbmdMaW5lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdExpbmUgPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGhYID0gZXZlbnQueCAtIGxhc3RMaW5lLnN0YXJ0Lng7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoWSA9IGV2ZW50LnkgLSBsYXN0TGluZS5zdGFydC55O1xuICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9ICgwLCBzY3JlZW5fMS5nZXRBbmdsZUZyb21MaW5lUHJvamVjdGlvbikobGVuZ3RoWCwgbGVuZ3RoWSk7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmVMZW5ndGggPSAwLjA7XG4gICAgICAgICAgICAgICAgaWYgKGFuZ2xlID09PSA5MCB8fCBhbmdsZSA9PT0gMjcwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVMZW5ndGggPSBsZW5ndGhZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUxlbmd0aCA9IChsZW5ndGhYKSAvIE1hdGguY29zKCgwLCB1dGlsc18xLnRvUmFkaWFucykoYW5nbGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogZmluZCBvdXQgbGluZWFyIHRyYW5zZm9ybWF0aW9uLCB0cmFuc2Zvcm0gc2NyZWVuIGNvcmRpbmF0aW9uIHRvIHdvcmxkXG4gICAgICAgICAgICAgICAgbGFzdExpbmUubGVuZ3RoID0gbGluZUxlbmd0aDtcbiAgICAgICAgICAgICAgICBsYXN0TGluZS5yb3RhdGUgPSBhbmdsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnICYmIGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBkcmF3aW5nTGluZSkge1xuICAgICAgICAgICAgICAgIGRyYXdpbmdMaW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGluZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgbGluZUNvdW50ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vZGUgPT09IERyYXdNb2RlLmNpcmNsZSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nICYmICFkcmF3aW5nQ2lybGUpIHtcbiAgICAgICAgICAgICAgICBjaXJjbGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5YOiBldmVudC54LCBvcmlnaW5ZOiBldmVudC55LFxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDAuMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyYXdpbmdDaXJsZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21vdXNlbW92ZScgJiYgZHJhd2luZ0NpcmxlKSB7XG4gICAgICAgICAgICAgICAgY2lyY2xlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luWDogZXZlbnQueCwgb3JpZ2luWTogZXZlbnQueSxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAwLjFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2V1cCcgJiYgZHJhd2luZ0NpcmxlKSB7XG4gICAgICAgICAgICAgICAgZHJhd2luZ0NpcmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBsZXQgbGVuZ3RoID0gZXZlbnRTdGFjay5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBldmVudFN0YWNrLnBvcCgpO1xuICAgIH1cbn1cbmxldCBjYW5jZWwgPSBudWxsO1xuLy8gVE9ETzogY2hlY2sgd2l0aCBnbG0gYWJvdXQgdHJhbnNwb3NlIHByb2plY3Rpb25cbmNvbnN0IHByb2plY3Rpb25NYXRyaXggPSAoKDAsIG1hdGl4XzEuY3JlYXRlUGVyc3BlY3RpdmVNYXRyaXgpKGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSk7XG5mdW5jdGlvbiBsb29wKCkge1xuICAgIGNhbmNlbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbiAgICBoYW5kbGVFdmVudHMoKTtcbiAgICBsZXQgdmlld01hdHJpeCA9ICgwLCBtYXRpeF8xLmNyZWF0ZVVuaXRNYXRyaXgpKDEuMCk7XG4gICAgdmlld01hdHJpeCA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KSh2aWV3TWF0cml4LCAoMCwgbWF0aXhfMS5jcmVhdGVSb3RhdGlvbk1hdHJpeCkoMCwgMCwgMCkpOyAvLyByb3RhdGVcbiAgICB2aWV3TWF0cml4ID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHZpZXdNYXRyaXgsICgwLCBtYXRpeF8xLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4KShjYW1lcmFQb3NpdGlvbi54LCBjYW1lcmFQb3NpdGlvbi55LCBjYW1lcmFQb3NpdGlvbi56KSk7IC8vIHRyYW5zbGF0ZVxuICAgIHVwZGF0ZUNhbWVyYSgpO1xuICAgIHJlbmRlcmVyLmJlZ2luU2NlbmUocHJvamVjdGlvbk1hdHJpeCwgKDAsIG1hdGl4XzEudHJhbnNwb3NlTWF0cml4KSh2aWV3TWF0cml4KSk7XG4gICAgcmVuZGVyTGluZXMoKTtcbiAgICByZW5kZXJDaXJjbGVzKCk7XG4gICAgcmVuZGVyZXIuZW5kU2NlbmUoKTtcbn1cbi8vIHNldFRpbWVvdXQoKCkgPT4ge1xuLy8gICBjYW5jZWxBbmltYXRpb25GcmFtZShjYW5jZWwpO1xuLy8gfSwgMzAwMCk7XG5sb29wKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/math/matix.ts":
/*!***************************!*\
  !*** ./src/math/matix.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.multiplyMatrix = exports.createRotationMatrix = exports.createScaleMatrix = exports.createTranslationMatrix = exports.createPerspectiveMatrix = exports.transposeMatrix = exports.createUnitMatrix = exports.printMatrix = exports.setMatrixValue = exports.getMatrixValue = exports.getRawValues = exports.createMatrix = void 0;\nfunction createMatrix(values, n = 4, m = 4) {\n    return ({\n        n: n,\n        m: m,\n        values: Float32Array.from(values.slice(0, n * m))\n    });\n}\nexports.createMatrix = createMatrix;\nfunction getRawValues(matrix) {\n    return matrix.values;\n}\nexports.getRawValues = getRawValues;\nfunction getMatrixValue(matrix, j, i) {\n    return matrix.values[i + matrix.m * j];\n}\nexports.getMatrixValue = getMatrixValue;\nfunction setMatrixValue(matrix, j, i, value) {\n    matrix.values[i + matrix.m * j] = value;\n}\nexports.setMatrixValue = setMatrixValue;\nfunction printMatrix(matrix) {\n    let res = '';\n    for (let j = 0; j < matrix.n; j++) {\n        res += `(${getMatrixValue(matrix, j, 0)}`;\n        for (let i = 1; i < matrix.m; i++) {\n            res += `|${getMatrixValue(matrix, j, i)}`;\n        }\n        res += `)\\n`;\n    }\n    return res;\n}\nexports.printMatrix = printMatrix;\nfunction createUnitMatrix(value) {\n    return createMatrix([\n        value, 0, 0, 0,\n        0, value, 0, 0,\n        0, 0, value, 0,\n        0, 0, 0, value,\n    ]);\n}\nexports.createUnitMatrix = createUnitMatrix;\nfunction transposeMatrix(matrix) {\n    for (let j = 0; j < matrix.m; j++) {\n        for (let i = j + 1; i < matrix.n; i++) {\n            const temp = getMatrixValue(matrix, j, i);\n            setMatrixValue(matrix, j, i, getMatrixValue(matrix, i, j));\n            setMatrixValue(matrix, i, j, temp);\n        }\n    }\n    return matrix;\n}\nexports.transposeMatrix = transposeMatrix;\nfunction createPerspectiveMatrix(fov, aspect, near, far) {\n    const matrix = createUnitMatrix(0.0);\n    const tan = Math.tan(fov / 2);\n    setMatrixValue(matrix, 0, 0, 1 / (aspect * tan));\n    setMatrixValue(matrix, 1, 1, 1 / tan);\n    setMatrixValue(matrix, 2, 2, -((far + near) / (far - near)));\n    setMatrixValue(matrix, 2, 3, -1);\n    setMatrixValue(matrix, 3, 2, -(2 * (far * near) / (far - near)));\n    return matrix;\n}\nexports.createPerspectiveMatrix = createPerspectiveMatrix;\nfunction createTranslationMatrix(x, y, z) {\n    const matrix = createUnitMatrix(1.0);\n    setMatrixValue(matrix, 0, 3, x);\n    setMatrixValue(matrix, 1, 3, y);\n    setMatrixValue(matrix, 2, 3, z);\n    return matrix;\n}\nexports.createTranslationMatrix = createTranslationMatrix;\nfunction createScaleMatrix(x, y, z) {\n    const matrix = createUnitMatrix(1.0);\n    setMatrixValue(matrix, 0, 0, x);\n    setMatrixValue(matrix, 1, 1, y);\n    setMatrixValue(matrix, 2, 2, z);\n    return matrix;\n}\nexports.createScaleMatrix = createScaleMatrix;\nfunction createRotationMatrix(a, b, g) {\n    const matrix = createUnitMatrix(1.0);\n    setMatrixValue(matrix, 0, 0, Math.cos(a) * Math.cos(b));\n    setMatrixValue(matrix, 0, 1, Math.cos(a) * Math.sin(b) * Math.sin(g) - Math.sin(a) * Math.cos(g));\n    setMatrixValue(matrix, 0, 2, Math.cos(a) * Math.sin(b) * Math.cos(g) + Math.sin(a) * Math.sin(g));\n    setMatrixValue(matrix, 1, 0, Math.sin(a) * Math.cos(b));\n    setMatrixValue(matrix, 1, 1, Math.sin(a) * Math.sin(b) * Math.sin(g) + Math.cos(a) * Math.cos(g));\n    setMatrixValue(matrix, 1, 2, Math.sin(a) * Math.sin(b) * Math.cos(g) - Math.cos(a) * Math.sin(g));\n    setMatrixValue(matrix, 2, 0, -Math.sin(b));\n    setMatrixValue(matrix, 2, 1, Math.cos(b) * Math.sin(g));\n    setMatrixValue(matrix, 2, 2, Math.cos(b) * Math.cos(g));\n    return matrix;\n}\nexports.createRotationMatrix = createRotationMatrix;\nfunction multiplyMatrix(m1, m2) {\n    // m1.n x m2.m\n    let value = 0;\n    const src = createMatrix(new Array(m1.n * m2.m).fill(0), m1.n, m2.m);\n    for (let j = 0; j < m1.n; j++) {\n        for (let i = 0; i < m2.m; i++) {\n            value = 0;\n            for (let m = 0; m < m1.m; m++) {\n                value += getMatrixValue(m1, j, m) * getMatrixValue(m2, m, i);\n            }\n            setMatrixValue(src, j, i, value);\n        }\n    }\n    return src;\n}\nexports.multiplyMatrix = multiplyMatrix;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0aC9tYXRpeC50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRyw0QkFBNEIsR0FBRyx5QkFBeUIsR0FBRywrQkFBK0IsR0FBRywrQkFBK0IsR0FBRyx1QkFBdUIsR0FBRyx3QkFBd0IsR0FBRyxtQkFBbUIsR0FBRyxzQkFBc0IsR0FBRyxzQkFBc0IsR0FBRyxvQkFBb0IsR0FBRyxvQkFBb0I7QUFDaFU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEMsbUJBQW1CLDZCQUE2QjtBQUNoRCx3QkFBd0IsY0FBYztBQUN0Qyx1QkFBdUIsNkJBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUIsd0JBQXdCLFVBQVU7QUFDbEM7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXdlci8uL3NyYy9tYXRoL21hdGl4LnRzPzQ4OTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm11bHRpcGx5TWF0cml4ID0gZXhwb3J0cy5jcmVhdGVSb3RhdGlvbk1hdHJpeCA9IGV4cG9ydHMuY3JlYXRlU2NhbGVNYXRyaXggPSBleHBvcnRzLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4ID0gZXhwb3J0cy5jcmVhdGVQZXJzcGVjdGl2ZU1hdHJpeCA9IGV4cG9ydHMudHJhbnNwb3NlTWF0cml4ID0gZXhwb3J0cy5jcmVhdGVVbml0TWF0cml4ID0gZXhwb3J0cy5wcmludE1hdHJpeCA9IGV4cG9ydHMuc2V0TWF0cml4VmFsdWUgPSBleHBvcnRzLmdldE1hdHJpeFZhbHVlID0gZXhwb3J0cy5nZXRSYXdWYWx1ZXMgPSBleHBvcnRzLmNyZWF0ZU1hdHJpeCA9IHZvaWQgMDtcbmZ1bmN0aW9uIGNyZWF0ZU1hdHJpeCh2YWx1ZXMsIG4gPSA0LCBtID0gNCkge1xuICAgIHJldHVybiAoe1xuICAgICAgICBuOiBuLFxuICAgICAgICBtOiBtLFxuICAgICAgICB2YWx1ZXM6IEZsb2F0MzJBcnJheS5mcm9tKHZhbHVlcy5zbGljZSgwLCBuICogbSkpXG4gICAgfSk7XG59XG5leHBvcnRzLmNyZWF0ZU1hdHJpeCA9IGNyZWF0ZU1hdHJpeDtcbmZ1bmN0aW9uIGdldFJhd1ZhbHVlcyhtYXRyaXgpIHtcbiAgICByZXR1cm4gbWF0cml4LnZhbHVlcztcbn1cbmV4cG9ydHMuZ2V0UmF3VmFsdWVzID0gZ2V0UmF3VmFsdWVzO1xuZnVuY3Rpb24gZ2V0TWF0cml4VmFsdWUobWF0cml4LCBqLCBpKSB7XG4gICAgcmV0dXJuIG1hdHJpeC52YWx1ZXNbaSArIG1hdHJpeC5tICogal07XG59XG5leHBvcnRzLmdldE1hdHJpeFZhbHVlID0gZ2V0TWF0cml4VmFsdWU7XG5mdW5jdGlvbiBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIGosIGksIHZhbHVlKSB7XG4gICAgbWF0cml4LnZhbHVlc1tpICsgbWF0cml4Lm0gKiBqXSA9IHZhbHVlO1xufVxuZXhwb3J0cy5zZXRNYXRyaXhWYWx1ZSA9IHNldE1hdHJpeFZhbHVlO1xuZnVuY3Rpb24gcHJpbnRNYXRyaXgobWF0cml4KSB7XG4gICAgbGV0IHJlcyA9ICcnO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbWF0cml4Lm47IGorKykge1xuICAgICAgICByZXMgKz0gYCgke2dldE1hdHJpeFZhbHVlKG1hdHJpeCwgaiwgMCl9YDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtYXRyaXgubTsgaSsrKSB7XG4gICAgICAgICAgICByZXMgKz0gYHwke2dldE1hdHJpeFZhbHVlKG1hdHJpeCwgaiwgaSl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXMgKz0gYClcXG5gO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZXhwb3J0cy5wcmludE1hdHJpeCA9IHByaW50TWF0cml4O1xuZnVuY3Rpb24gY3JlYXRlVW5pdE1hdHJpeCh2YWx1ZSkge1xuICAgIHJldHVybiBjcmVhdGVNYXRyaXgoW1xuICAgICAgICB2YWx1ZSwgMCwgMCwgMCxcbiAgICAgICAgMCwgdmFsdWUsIDAsIDAsXG4gICAgICAgIDAsIDAsIHZhbHVlLCAwLFxuICAgICAgICAwLCAwLCAwLCB2YWx1ZSxcbiAgICBdKTtcbn1cbmV4cG9ydHMuY3JlYXRlVW5pdE1hdHJpeCA9IGNyZWF0ZVVuaXRNYXRyaXg7XG5mdW5jdGlvbiB0cmFuc3Bvc2VNYXRyaXgobWF0cml4KSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXRyaXgubTsgaisrKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBqICsgMTsgaSA8IG1hdHJpeC5uOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBnZXRNYXRyaXhWYWx1ZShtYXRyaXgsIGosIGkpO1xuICAgICAgICAgICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCBqLCBpLCBnZXRNYXRyaXhWYWx1ZShtYXRyaXgsIGksIGopKTtcbiAgICAgICAgICAgIHNldE1hdHJpeFZhbHVlKG1hdHJpeCwgaSwgaiwgdGVtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hdHJpeDtcbn1cbmV4cG9ydHMudHJhbnNwb3NlTWF0cml4ID0gdHJhbnNwb3NlTWF0cml4O1xuZnVuY3Rpb24gY3JlYXRlUGVyc3BlY3RpdmVNYXRyaXgoZm92LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICAgIGNvbnN0IG1hdHJpeCA9IGNyZWF0ZVVuaXRNYXRyaXgoMC4wKTtcbiAgICBjb25zdCB0YW4gPSBNYXRoLnRhbihmb3YgLyAyKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDAsIDAsIDEgLyAoYXNwZWN0ICogdGFuKSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAxLCAxLCAxIC8gdGFuKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDIsIDIsIC0oKGZhciArIG5lYXIpIC8gKGZhciAtIG5lYXIpKSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAyLCAzLCAtMSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAzLCAyLCAtKDIgKiAoZmFyICogbmVhcikgLyAoZmFyIC0gbmVhcikpKTtcbiAgICByZXR1cm4gbWF0cml4O1xufVxuZXhwb3J0cy5jcmVhdGVQZXJzcGVjdGl2ZU1hdHJpeCA9IGNyZWF0ZVBlcnNwZWN0aXZlTWF0cml4O1xuZnVuY3Rpb24gY3JlYXRlVHJhbnNsYXRpb25NYXRyaXgoeCwgeSwgeikge1xuICAgIGNvbnN0IG1hdHJpeCA9IGNyZWF0ZVVuaXRNYXRyaXgoMS4wKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDAsIDMsIHgpO1xuICAgIHNldE1hdHJpeFZhbHVlKG1hdHJpeCwgMSwgMywgeSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAyLCAzLCB6KTtcbiAgICByZXR1cm4gbWF0cml4O1xufVxuZXhwb3J0cy5jcmVhdGVUcmFuc2xhdGlvbk1hdHJpeCA9IGNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4O1xuZnVuY3Rpb24gY3JlYXRlU2NhbGVNYXRyaXgoeCwgeSwgeikge1xuICAgIGNvbnN0IG1hdHJpeCA9IGNyZWF0ZVVuaXRNYXRyaXgoMS4wKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDAsIDAsIHgpO1xuICAgIHNldE1hdHJpeFZhbHVlKG1hdHJpeCwgMSwgMSwgeSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAyLCAyLCB6KTtcbiAgICByZXR1cm4gbWF0cml4O1xufVxuZXhwb3J0cy5jcmVhdGVTY2FsZU1hdHJpeCA9IGNyZWF0ZVNjYWxlTWF0cml4O1xuZnVuY3Rpb24gY3JlYXRlUm90YXRpb25NYXRyaXgoYSwgYiwgZykge1xuICAgIGNvbnN0IG1hdHJpeCA9IGNyZWF0ZVVuaXRNYXRyaXgoMS4wKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDAsIDAsIE1hdGguY29zKGEpICogTWF0aC5jb3MoYikpO1xuICAgIHNldE1hdHJpeFZhbHVlKG1hdHJpeCwgMCwgMSwgTWF0aC5jb3MoYSkgKiBNYXRoLnNpbihiKSAqIE1hdGguc2luKGcpIC0gTWF0aC5zaW4oYSkgKiBNYXRoLmNvcyhnKSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAwLCAyLCBNYXRoLmNvcyhhKSAqIE1hdGguc2luKGIpICogTWF0aC5jb3MoZykgKyBNYXRoLnNpbihhKSAqIE1hdGguc2luKGcpKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDEsIDAsIE1hdGguc2luKGEpICogTWF0aC5jb3MoYikpO1xuICAgIHNldE1hdHJpeFZhbHVlKG1hdHJpeCwgMSwgMSwgTWF0aC5zaW4oYSkgKiBNYXRoLnNpbihiKSAqIE1hdGguc2luKGcpICsgTWF0aC5jb3MoYSkgKiBNYXRoLmNvcyhnKSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAxLCAyLCBNYXRoLnNpbihhKSAqIE1hdGguc2luKGIpICogTWF0aC5jb3MoZykgLSBNYXRoLmNvcyhhKSAqIE1hdGguc2luKGcpKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDIsIDAsIC1NYXRoLnNpbihiKSk7XG4gICAgc2V0TWF0cml4VmFsdWUobWF0cml4LCAyLCAxLCBNYXRoLmNvcyhiKSAqIE1hdGguc2luKGcpKTtcbiAgICBzZXRNYXRyaXhWYWx1ZShtYXRyaXgsIDIsIDIsIE1hdGguY29zKGIpICogTWF0aC5jb3MoZykpO1xuICAgIHJldHVybiBtYXRyaXg7XG59XG5leHBvcnRzLmNyZWF0ZVJvdGF0aW9uTWF0cml4ID0gY3JlYXRlUm90YXRpb25NYXRyaXg7XG5mdW5jdGlvbiBtdWx0aXBseU1hdHJpeChtMSwgbTIpIHtcbiAgICAvLyBtMS5uIHggbTIubVxuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgY29uc3Qgc3JjID0gY3JlYXRlTWF0cml4KG5ldyBBcnJheShtMS5uICogbTIubSkuZmlsbCgwKSwgbTEubiwgbTIubSk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBtMS5uOyBqKyspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtMi5tOyBpKyspIHtcbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IG0gPSAwOyBtIDwgbTEubTsgbSsrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgKz0gZ2V0TWF0cml4VmFsdWUobTEsIGosIG0pICogZ2V0TWF0cml4VmFsdWUobTIsIG0sIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0TWF0cml4VmFsdWUoc3JjLCBqLCBpLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNyYztcbn1cbmV4cG9ydHMubXVsdGlwbHlNYXRyaXggPSBtdWx0aXBseU1hdHJpeDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/math/matix.ts\n");

/***/ }),

/***/ "./src/math/screen.ts":
/*!****************************!*\
  !*** ./src/math/screen.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.convertScreenCoordToWorldCoord = exports.getAngleFromLineProjection = exports.normalizeYCoord = exports.normalizeXCoord = void 0;\nconst utils_1 = __webpack_require__(/*! ./utils */ \"./src/math/utils.ts\");\nfunction normalizeXCoord(x, screenWidth) {\n    return ((x / screenWidth) * 2 - 1);\n}\nexports.normalizeXCoord = normalizeXCoord;\nfunction normalizeYCoord(y, screenHeight) {\n    return ((y / screenHeight) * 2 - 1) * -1;\n}\nexports.normalizeYCoord = normalizeYCoord;\nfunction getAngleFromLineProjection(projectionX, projectionY) {\n    let angel = (0, utils_1.toDegrees)(Math.atan(projectionY / projectionX));\n    if (projectionX < 0 && projectionY > 0) {\n        angel = 180 + angel;\n    }\n    if (projectionX < 0 && projectionY < 0) {\n        angel = 180 + angel;\n    }\n    if (projectionX > 0 && projectionY < 0) {\n        angel = 360 + angel;\n    }\n    angel = Math.abs(angel);\n    return angel;\n}\nexports.getAngleFromLineProjection = getAngleFromLineProjection;\nfunction convertScreenCoordToWorldCoord(coord, cameraPosition, paitingLayer, screenWidth, screenHeight, fovy, aspect) {\n    const offsetXNormalized = normalizeXCoord(coord.x, screenWidth);\n    const offsetYNormalized = normalizeYCoord(coord.y, screenHeight);\n    const tan = Math.tan(fovy / 2);\n    // TODO: use inverse projection matrix to calculate this\n    const projectCoefX = (aspect * tan * (-paitingLayer + cameraPosition.z));\n    const projectCoefY = (tan * (-paitingLayer + cameraPosition.z));\n    const startX = cameraPosition.x + (offsetXNormalized * projectCoefX);\n    const startY = cameraPosition.y + (offsetYNormalized * projectCoefY);\n    coord.x = startX;\n    coord.y = startY;\n}\nexports.convertScreenCoordToWorldCoord = convertScreenCoordToWorldCoord;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0aC9zY3JlZW4udHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0NBQXNDLEdBQUcsa0NBQWtDLEdBQUcsdUJBQXVCLEdBQUcsdUJBQXVCO0FBQy9ILGdCQUFnQixtQkFBTyxDQUFDLG9DQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3ZXIvLi9zcmMvbWF0aC9zY3JlZW4udHM/ZGJhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY29udmVydFNjcmVlbkNvb3JkVG9Xb3JsZENvb3JkID0gZXhwb3J0cy5nZXRBbmdsZUZyb21MaW5lUHJvamVjdGlvbiA9IGV4cG9ydHMubm9ybWFsaXplWUNvb3JkID0gZXhwb3J0cy5ub3JtYWxpemVYQ29vcmQgPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5mdW5jdGlvbiBub3JtYWxpemVYQ29vcmQoeCwgc2NyZWVuV2lkdGgpIHtcbiAgICByZXR1cm4gKCh4IC8gc2NyZWVuV2lkdGgpICogMiAtIDEpO1xufVxuZXhwb3J0cy5ub3JtYWxpemVYQ29vcmQgPSBub3JtYWxpemVYQ29vcmQ7XG5mdW5jdGlvbiBub3JtYWxpemVZQ29vcmQoeSwgc2NyZWVuSGVpZ2h0KSB7XG4gICAgcmV0dXJuICgoeSAvIHNjcmVlbkhlaWdodCkgKiAyIC0gMSkgKiAtMTtcbn1cbmV4cG9ydHMubm9ybWFsaXplWUNvb3JkID0gbm9ybWFsaXplWUNvb3JkO1xuZnVuY3Rpb24gZ2V0QW5nbGVGcm9tTGluZVByb2plY3Rpb24ocHJvamVjdGlvblgsIHByb2plY3Rpb25ZKSB7XG4gICAgbGV0IGFuZ2VsID0gKDAsIHV0aWxzXzEudG9EZWdyZWVzKShNYXRoLmF0YW4ocHJvamVjdGlvblkgLyBwcm9qZWN0aW9uWCkpO1xuICAgIGlmIChwcm9qZWN0aW9uWCA8IDAgJiYgcHJvamVjdGlvblkgPiAwKSB7XG4gICAgICAgIGFuZ2VsID0gMTgwICsgYW5nZWw7XG4gICAgfVxuICAgIGlmIChwcm9qZWN0aW9uWCA8IDAgJiYgcHJvamVjdGlvblkgPCAwKSB7XG4gICAgICAgIGFuZ2VsID0gMTgwICsgYW5nZWw7XG4gICAgfVxuICAgIGlmIChwcm9qZWN0aW9uWCA+IDAgJiYgcHJvamVjdGlvblkgPCAwKSB7XG4gICAgICAgIGFuZ2VsID0gMzYwICsgYW5nZWw7XG4gICAgfVxuICAgIGFuZ2VsID0gTWF0aC5hYnMoYW5nZWwpO1xuICAgIHJldHVybiBhbmdlbDtcbn1cbmV4cG9ydHMuZ2V0QW5nbGVGcm9tTGluZVByb2plY3Rpb24gPSBnZXRBbmdsZUZyb21MaW5lUHJvamVjdGlvbjtcbmZ1bmN0aW9uIGNvbnZlcnRTY3JlZW5Db29yZFRvV29ybGRDb29yZChjb29yZCwgY2FtZXJhUG9zaXRpb24sIHBhaXRpbmdMYXllciwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCwgZm92eSwgYXNwZWN0KSB7XG4gICAgY29uc3Qgb2Zmc2V0WE5vcm1hbGl6ZWQgPSBub3JtYWxpemVYQ29vcmQoY29vcmQueCwgc2NyZWVuV2lkdGgpO1xuICAgIGNvbnN0IG9mZnNldFlOb3JtYWxpemVkID0gbm9ybWFsaXplWUNvb3JkKGNvb3JkLnksIHNjcmVlbkhlaWdodCk7XG4gICAgY29uc3QgdGFuID0gTWF0aC50YW4oZm92eSAvIDIpO1xuICAgIC8vIFRPRE86IHVzZSBpbnZlcnNlIHByb2plY3Rpb24gbWF0cml4IHRvIGNhbGN1bGF0ZSB0aGlzXG4gICAgY29uc3QgcHJvamVjdENvZWZYID0gKGFzcGVjdCAqIHRhbiAqICgtcGFpdGluZ0xheWVyICsgY2FtZXJhUG9zaXRpb24ueikpO1xuICAgIGNvbnN0IHByb2plY3RDb2VmWSA9ICh0YW4gKiAoLXBhaXRpbmdMYXllciArIGNhbWVyYVBvc2l0aW9uLnopKTtcbiAgICBjb25zdCBzdGFydFggPSBjYW1lcmFQb3NpdGlvbi54ICsgKG9mZnNldFhOb3JtYWxpemVkICogcHJvamVjdENvZWZYKTtcbiAgICBjb25zdCBzdGFydFkgPSBjYW1lcmFQb3NpdGlvbi55ICsgKG9mZnNldFlOb3JtYWxpemVkICogcHJvamVjdENvZWZZKTtcbiAgICBjb29yZC54ID0gc3RhcnRYO1xuICAgIGNvb3JkLnkgPSBzdGFydFk7XG59XG5leHBvcnRzLmNvbnZlcnRTY3JlZW5Db29yZFRvV29ybGRDb29yZCA9IGNvbnZlcnRTY3JlZW5Db29yZFRvV29ybGRDb29yZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/math/screen.ts\n");

/***/ }),

/***/ "./src/math/utils.ts":
/*!***************************!*\
  !*** ./src/math/utils.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.smootsptep = exports.clamp = exports.toDegrees = exports.toRadians = void 0;\nconst toRaduansCof = Math.PI / 180.0;\nfunction toRadians(angle) {\n    return angle * toRaduansCof;\n}\nexports.toRadians = toRadians;\nfunction toDegrees(angle) {\n    return angle / toRaduansCof;\n}\nexports.toDegrees = toDegrees;\nfunction clamp(n, l, u) {\n    return Math.min(Math.max(n, l), u);\n}\nexports.clamp = clamp;\nfunction smootsptep(edge0, edge1, x) {\n    let t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n    return t * t * (3.0 - 2.0 * t);\n}\nexports.smootsptep = smootsptep;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0aC91dGlscy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxrQkFBa0IsR0FBRyxhQUFhLEdBQUcsaUJBQWlCLEdBQUcsaUJBQWlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3ZXIvLi9zcmMvbWF0aC91dGlscy50cz8xMjgyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zbW9vdHNwdGVwID0gZXhwb3J0cy5jbGFtcCA9IGV4cG9ydHMudG9EZWdyZWVzID0gZXhwb3J0cy50b1JhZGlhbnMgPSB2b2lkIDA7XG5jb25zdCB0b1JhZHVhbnNDb2YgPSBNYXRoLlBJIC8gMTgwLjA7XG5mdW5jdGlvbiB0b1JhZGlhbnMoYW5nbGUpIHtcbiAgICByZXR1cm4gYW5nbGUgKiB0b1JhZHVhbnNDb2Y7XG59XG5leHBvcnRzLnRvUmFkaWFucyA9IHRvUmFkaWFucztcbmZ1bmN0aW9uIHRvRGVncmVlcyhhbmdsZSkge1xuICAgIHJldHVybiBhbmdsZSAvIHRvUmFkdWFuc0NvZjtcbn1cbmV4cG9ydHMudG9EZWdyZWVzID0gdG9EZWdyZWVzO1xuZnVuY3Rpb24gY2xhbXAobiwgbCwgdSkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChuLCBsKSwgdSk7XG59XG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XG5mdW5jdGlvbiBzbW9vdHNwdGVwKGVkZ2UwLCBlZGdlMSwgeCkge1xuICAgIGxldCB0ID0gY2xhbXAoKHggLSBlZGdlMCkgLyAoZWRnZTEgLSBlZGdlMCksIDAuMCwgMS4wKTtcbiAgICByZXR1cm4gdCAqIHQgKiAoMy4wIC0gMi4wICogdCk7XG59XG5leHBvcnRzLnNtb290c3B0ZXAgPSBzbW9vdHNwdGVwO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/math/utils.ts\n");

/***/ }),

/***/ "./src/math/vec.ts":
/*!*************************!*\
  !*** ./src/math/vec.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createVec4 = exports.createVec3 = exports.createVec2 = void 0;\nfunction createVec2(x, y) {\n    return ({\n        x, y\n    });\n}\nexports.createVec2 = createVec2;\nfunction createVec3(x, y, z) {\n    return ({\n        x, y, z\n    });\n}\nexports.createVec3 = createVec3;\nfunction createVec4(x, y, z, w) {\n    return ({\n        x, y, z, w\n    });\n}\nexports.createVec4 = createVec4;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0aC92ZWMudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCLEdBQUcsa0JBQWtCLEdBQUcsa0JBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhd2VyLy4vc3JjL21hdGgvdmVjLnRzP2IyYzgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZVZlYzQgPSBleHBvcnRzLmNyZWF0ZVZlYzMgPSBleHBvcnRzLmNyZWF0ZVZlYzIgPSB2b2lkIDA7XG5mdW5jdGlvbiBjcmVhdGVWZWMyKHgsIHkpIHtcbiAgICByZXR1cm4gKHtcbiAgICAgICAgeCwgeVxuICAgIH0pO1xufVxuZXhwb3J0cy5jcmVhdGVWZWMyID0gY3JlYXRlVmVjMjtcbmZ1bmN0aW9uIGNyZWF0ZVZlYzMoeCwgeSwgeikge1xuICAgIHJldHVybiAoe1xuICAgICAgICB4LCB5LCB6XG4gICAgfSk7XG59XG5leHBvcnRzLmNyZWF0ZVZlYzMgPSBjcmVhdGVWZWMzO1xuZnVuY3Rpb24gY3JlYXRlVmVjNCh4LCB5LCB6LCB3KSB7XG4gICAgcmV0dXJuICh7XG4gICAgICAgIHgsIHksIHosIHdcbiAgICB9KTtcbn1cbmV4cG9ydHMuY3JlYXRlVmVjNCA9IGNyZWF0ZVZlYzQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/math/vec.ts\n");

/***/ }),

/***/ "./src/render/components.ts":
/*!**********************************!*\
  !*** ./src/render/components.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createLine = void 0;\nfunction createLine(start, length) {\n    return ({\n        start,\n        length,\n        scale: 1.0,\n        rotate: 0.0,\n        line: -1\n    });\n}\nexports.createLine = createLine;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2NvbXBvbmVudHMudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhd2VyLy4vc3JjL3JlbmRlci9jb21wb25lbnRzLnRzP2NiZWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZUxpbmUgPSB2b2lkIDA7XG5mdW5jdGlvbiBjcmVhdGVMaW5lKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICByZXR1cm4gKHtcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIGxlbmd0aCxcbiAgICAgICAgc2NhbGU6IDEuMCxcbiAgICAgICAgcm90YXRlOiAwLjAsXG4gICAgICAgIGxpbmU6IC0xXG4gICAgfSk7XG59XG5leHBvcnRzLmNyZWF0ZUxpbmUgPSBjcmVhdGVMaW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/components.ts\n");

/***/ }),

/***/ "./src/render/const.ts":
/*!*****************************!*\
  !*** ./src/render/const.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.paitingLayer = void 0;\nexports.paitingLayer = -3.0;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2NvbnN0LnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQjtBQUNwQixvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3ZXIvLi9zcmMvcmVuZGVyL2NvbnN0LnRzPzVkMjciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhaXRpbmdMYXllciA9IHZvaWQgMDtcbmV4cG9ydHMucGFpdGluZ0xheWVyID0gLTMuMDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/const.ts\n");

/***/ }),

/***/ "./src/render/gl-api.ts":
/*!******************************!*\
  !*** ./src/render/gl-api.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createGLShader = exports.creareGLProgram = void 0;\nfunction creareGLProgram(gl, vertShader, fragShader) {\n    const program = gl.createProgram();\n    gl.attachShader(program, createGLShader(gl, gl.VERTEX_SHADER, vertShader));\n    gl.attachShader(program, createGLShader(gl, gl.FRAGMENT_SHADER, fragShader));\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        const info = gl.getProgramInfoLog(program);\n        console.warn(`Fail to link program: ${info}`);\n        gl.deleteProgram(program);\n        return null;\n    }\n    return program;\n}\nexports.creareGLProgram = creareGLProgram;\nfunction createGLShader(gl, type, shaderSrc) {\n    const shader = gl.createShader(type);\n    if (shader === 0)\n        console.warn('Fail to create shader');\n    gl.shaderSource(shader, shaderSrc);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        const message = gl.getShaderInfoLog(shader);\n        console.warn(`Fail to compile shader: ${message}`);\n        gl.deleteShader(shader);\n        return null;\n    }\n    return shader;\n}\nexports.createGLShader = createGLShader;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2dsLWFwaS50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxzQkFBc0IsR0FBRyx1QkFBdUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsS0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsUUFBUTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhd2VyLy4vc3JjL3JlbmRlci9nbC1hcGkudHM/M2M4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY3JlYXRlR0xTaGFkZXIgPSBleHBvcnRzLmNyZWFyZUdMUHJvZ3JhbSA9IHZvaWQgMDtcbmZ1bmN0aW9uIGNyZWFyZUdMUHJvZ3JhbShnbCwgdmVydFNoYWRlciwgZnJhZ1NoYWRlcikge1xuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNyZWF0ZUdMU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2ZXJ0U2hhZGVyKSk7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNyZWF0ZUdMU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZyYWdTaGFkZXIpKTtcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsIHRvIGxpbmsgcHJvZ3JhbTogJHtpbmZvfWApO1xuICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHByb2dyYW07XG59XG5leHBvcnRzLmNyZWFyZUdMUHJvZ3JhbSA9IGNyZWFyZUdMUHJvZ3JhbTtcbmZ1bmN0aW9uIGNyZWF0ZUdMU2hhZGVyKGdsLCB0eXBlLCBzaGFkZXJTcmMpIHtcbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgaWYgKHNoYWRlciA9PT0gMClcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsIHRvIGNyZWF0ZSBzaGFkZXInKTtcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzaGFkZXJTcmMpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWwgdG8gY29tcGlsZSBzaGFkZXI6ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuZXhwb3J0cy5jcmVhdGVHTFNoYWRlciA9IGNyZWF0ZUdMU2hhZGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/gl-api.ts\n");

/***/ }),

/***/ "./src/render/renderer.ts":
/*!********************************!*\
  !*** ./src/render/renderer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Renderer = void 0;\nconst matix_1 = __webpack_require__(/*! ../math/matix */ \"./src/math/matix.ts\");\nconst const_1 = __webpack_require__(/*! ./const */ \"./src/render/const.ts\");\nconst gl_api_1 = __webpack_require__(/*! ./gl-api */ \"./src/render/gl-api.ts\");\nconst utils_1 = __webpack_require__(/*! ../math/utils */ \"./src/math/utils.ts\");\nconst line_vertex_glsl_1 = __webpack_require__(/*! ../assets/line-vertex.glsl */ \"./src/assets/line-vertex.glsl\");\nconst circle_vertex_glsl_1 = __webpack_require__(/*! ../assets/circle-vertex.glsl */ \"./src/assets/circle-vertex.glsl\");\nconst line_pixel_glsl_1 = __webpack_require__(/*! ../assets/line-pixel.glsl */ \"./src/assets/line-pixel.glsl\");\nconst circle_pixel_glsl_1 = __webpack_require__(/*! ../assets/circle-pixel.glsl */ \"./src/assets/circle-pixel.glsl\");\nconst dataPerVertex = 3;\nconst dataPerLine = dataPerVertex * 6;\nconst dataPerCircleVertex = 5;\nconst dataPerCircle = dataPerCircleVertex * 6;\nconst lineBufferSize = 10000;\nconst circleBufferSize = 10000;\nlet flushLine = 0;\nlet flushCircle = 0;\nclass Renderer {\n    constructor(gl, screenWidth, screenHeight) {\n        this.gl = gl;\n        this.projection = null;\n        this.camera = null;\n        this.squreData = new Float32Array(lineBufferSize * dataPerLine);\n        this.circleData = new Float32Array(circleBufferSize * dataPerCircle);\n        this.squreCount = 0;\n        this.circleCount = 0;\n        this.squreVBO = gl.createBuffer();\n        this.squreProgram = (0, gl_api_1.creareGLProgram)(gl, line_vertex_glsl_1.default, line_pixel_glsl_1.default);\n        this.squreUniforms = {\n            modelViewLocation: gl.getUniformLocation(this.squreProgram, 'MV'),\n            modelLocation: gl.getUniformLocation(this.squreProgram, 'MM'),\n            projectionLocation: gl.getUniformLocation(this.squreProgram, 'P'),\n        };\n        this.circleVBO = gl.createBuffer();\n        this.circleProgram = (0, gl_api_1.creareGLProgram)(gl, circle_vertex_glsl_1.default, circle_pixel_glsl_1.default);\n        this.circleUniforms = {\n            modelViewLocation: gl.getUniformLocation(this.circleProgram, 'MV'),\n            modelLocation: gl.getUniformLocation(this.circleProgram, 'MM'),\n            projectionLocation: gl.getUniformLocation(this.circleProgram, 'P'),\n        };\n        gl.viewport(0, 0, screenWidth, screenHeight);\n        gl.enable(gl.DEPTH_TEST);\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    }\n    beginScene(projection, camera) {\n        flushLine = 0; // TODO: delete\n        flushCircle = 0;\n        this.projection = projection;\n        this.camera = camera;\n        if (this.isDataNotFlushed()) {\n            console.warn('Render data was not flushed from prev scene');\n        }\n        this.squreCount = 0;\n        this.circleCount = 0;\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n    }\n    drawLine(line) {\n        const lineLength = line.length;\n        const xProjection = (lineLength * Math.cos((0, utils_1.toRadians)(line.rotate)) / 2);\n        const yProjection = (lineLength * Math.sin((0, utils_1.toRadians)(line.rotate)) / 2);\n        const translate = (0, matix_1.createTranslationMatrix)(line.start.x + xProjection, line.start.y + yProjection, 0);\n        const rotate = (0, matix_1.createRotationMatrix)((0, utils_1.toRadians)(line.rotate), 0, 0);\n        const scale = (0, matix_1.createScaleMatrix)(lineLength, 0.1, 1.0);\n        this.drawSqure(translate, rotate, scale);\n    }\n    drawSqure(translate = null, rotate = null, scale = null) {\n        if (this.squreCount === lineBufferSize) {\n            let modelMatrix = (0, matix_1.transposeMatrix)((0, matix_1.createUnitMatrix)(1.0));\n            this.flushSqure(modelMatrix);\n        }\n        let leftTop = (0, matix_1.createMatrix)([-0.5, 0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let leftBottom = (0, matix_1.createMatrix)([-0.5, -0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let rightTop = (0, matix_1.createMatrix)([0.5, 0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let rightBottom = (0, matix_1.createMatrix)([0.5, -0.5, const_1.paitingLayer, 1.0], 4, 1);\n        if (scale) {\n            leftTop = (0, matix_1.multiplyMatrix)(scale, leftTop);\n            leftBottom = (0, matix_1.multiplyMatrix)(scale, leftBottom);\n            rightTop = (0, matix_1.multiplyMatrix)(scale, rightTop);\n            rightBottom = (0, matix_1.multiplyMatrix)(scale, rightBottom);\n        }\n        if (rotate) {\n            leftTop = (0, matix_1.multiplyMatrix)(rotate, leftTop);\n            leftBottom = (0, matix_1.multiplyMatrix)(rotate, leftBottom);\n            rightTop = (0, matix_1.multiplyMatrix)(rotate, rightTop);\n            rightBottom = (0, matix_1.multiplyMatrix)(rotate, rightBottom);\n        }\n        if (translate) {\n            leftTop = (0, matix_1.multiplyMatrix)(translate, leftTop);\n            leftBottom = (0, matix_1.multiplyMatrix)(translate, leftBottom);\n            rightTop = (0, matix_1.multiplyMatrix)(translate, rightTop);\n            rightBottom = (0, matix_1.multiplyMatrix)(translate, rightBottom);\n        }\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 0 + 0] = (0, matix_1.getMatrixValue)(leftTop, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 0 + 1] = (0, matix_1.getMatrixValue)(leftTop, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 0 + 2] = (0, matix_1.getMatrixValue)(leftTop, 2, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 1 + 0] = (0, matix_1.getMatrixValue)(rightTop, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 1 + 1] = (0, matix_1.getMatrixValue)(rightTop, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 1 + 2] = (0, matix_1.getMatrixValue)(rightTop, 2, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 2 + 0] = (0, matix_1.getMatrixValue)(leftBottom, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 2 + 1] = (0, matix_1.getMatrixValue)(leftBottom, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 2 + 2] = (0, matix_1.getMatrixValue)(leftBottom, 2, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 3 + 0] = (0, matix_1.getMatrixValue)(rightBottom, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 3 + 1] = (0, matix_1.getMatrixValue)(rightBottom, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 3 + 2] = (0, matix_1.getMatrixValue)(rightBottom, 2, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 4 + 0] = (0, matix_1.getMatrixValue)(rightTop, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 4 + 1] = (0, matix_1.getMatrixValue)(rightTop, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 4 + 2] = (0, matix_1.getMatrixValue)(rightTop, 2, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 5 + 0] = (0, matix_1.getMatrixValue)(leftBottom, 0, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 5 + 1] = (0, matix_1.getMatrixValue)(leftBottom, 1, 0);\n        this.squreData[this.squreCount * dataPerLine + dataPerVertex * 5 + 2] = (0, matix_1.getMatrixValue)(leftBottom, 2, 0);\n        this.squreCount += 1;\n    }\n    drawCircle(circle) {\n        if (this.circleCount === circleBufferSize) {\n            let modelMatrix = (0, matix_1.transposeMatrix)((0, matix_1.createUnitMatrix)(1.0));\n            this.flushCircle(modelMatrix);\n        }\n        let leftTop = (0, matix_1.createMatrix)([-0.5, 0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let leftBottom = (0, matix_1.createMatrix)([-0.5, -0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let rightTop = (0, matix_1.createMatrix)([0.5, 0.5, const_1.paitingLayer, 1.0], 4, 1);\n        let rightBottom = (0, matix_1.createMatrix)([0.5, -0.5, const_1.paitingLayer, 1.0], 4, 1);\n        const translate = (0, matix_1.createTranslationMatrix)(circle.originX, circle.originY, 0);\n        // const rotate = createRotationMatrix(0, 0, 0);\n        const scale = (0, matix_1.createScaleMatrix)(circle.radius * 2, circle.radius * 2, 1.0);\n        leftTop = (0, matix_1.multiplyMatrix)(scale, leftTop);\n        leftBottom = (0, matix_1.multiplyMatrix)(scale, leftBottom);\n        rightTop = (0, matix_1.multiplyMatrix)(scale, rightTop);\n        rightBottom = (0, matix_1.multiplyMatrix)(scale, rightBottom);\n        // leftTop =  multiplyMatrix(rotate, leftTop);\n        // leftBottom = multiplyMatrix(rotate, leftBottom);\n        // rightTop =  multiplyMatrix(rotate, rightTop);\n        // rightBottom = multiplyMatrix(rotate, rightBottom);\n        leftTop = (0, matix_1.multiplyMatrix)(translate, leftTop);\n        leftBottom = (0, matix_1.multiplyMatrix)(translate, leftBottom);\n        rightTop = (0, matix_1.multiplyMatrix)(translate, rightTop);\n        rightBottom = (0, matix_1.multiplyMatrix)(translate, rightBottom);\n        const dataPerVertex = 5;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 0 + 0] = (0, matix_1.getMatrixValue)(leftTop, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 0 + 1] = (0, matix_1.getMatrixValue)(leftTop, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 0 + 2] = (0, matix_1.getMatrixValue)(leftTop, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 0 + 3] = 0.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 0 + 4] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 1 + 0] = (0, matix_1.getMatrixValue)(rightTop, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 1 + 1] = (0, matix_1.getMatrixValue)(rightTop, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 1 + 2] = (0, matix_1.getMatrixValue)(rightTop, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 1 + 3] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 1 + 4] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 2 + 0] = (0, matix_1.getMatrixValue)(leftBottom, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 2 + 1] = (0, matix_1.getMatrixValue)(leftBottom, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 2 + 2] = (0, matix_1.getMatrixValue)(leftBottom, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 2 + 3] = 0.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 2 + 4] = 0.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 3 + 0] = (0, matix_1.getMatrixValue)(rightBottom, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 3 + 1] = (0, matix_1.getMatrixValue)(rightBottom, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 3 + 2] = (0, matix_1.getMatrixValue)(rightBottom, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 3 + 3] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 3 + 4] = 0.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 4 + 0] = (0, matix_1.getMatrixValue)(rightTop, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 4 + 1] = (0, matix_1.getMatrixValue)(rightTop, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 4 + 2] = (0, matix_1.getMatrixValue)(rightTop, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 4 + 3] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 4 + 4] = 1.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 5 + 0] = (0, matix_1.getMatrixValue)(leftBottom, 0, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 5 + 1] = (0, matix_1.getMatrixValue)(leftBottom, 1, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 5 + 2] = (0, matix_1.getMatrixValue)(leftBottom, 2, 0);\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 5 + 3] = 0.0;\n        this.circleData[this.circleCount * dataPerCircle + dataPerVertex * 5 + 4] = 0.0;\n        this.circleCount += 1;\n    }\n    endScene() {\n        this.flush();\n        this.projection = null;\n        this.camera = null;\n        this.squreCount = 0;\n        this.circleCount = 0;\n        // console.log('flush squre count', flushLine);\n        // console.log('flush circle count', flushCircle);\n        flushLine = 0;\n        flushCircle = 0;\n    }\n    flush() {\n        let modelMatrix = (0, matix_1.transposeMatrix)((0, matix_1.createUnitMatrix)(1.0));\n        this.flushSqure(modelMatrix);\n        this.flushCircle(modelMatrix);\n    }\n    flushSqure(modelMatrix) {\n        if (this.squreCount !== 0) {\n            flushLine += 1;\n            this.gl.useProgram(this.squreProgram);\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.squreVBO);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, this.squreData, this.gl.STATIC_DRAW);\n            this.gl.vertexAttribPointer(0, 3, this.gl.FLOAT, false, Float32Array.BYTES_PER_ELEMENT * dataPerVertex, 0);\n            this.gl.enableVertexAttribArray(0);\n            if (this.camera) {\n                this.gl.uniformMatrix4fv(this.squreUniforms.modelViewLocation, false, (0, matix_1.getRawValues)(this.camera));\n            }\n            this.gl.uniformMatrix4fv(this.squreUniforms.modelLocation, false, (0, matix_1.getRawValues)(modelMatrix));\n            if (this.projection) {\n                this.gl.uniformMatrix4fv(this.squreUniforms.projectionLocation, false, (0, matix_1.getRawValues)(this.projection));\n            }\n            this.gl.drawArrays(this.gl.TRIANGLES, 0, this.squreCount * 6);\n        }\n        this.squreCount = 0;\n    }\n    flushCircle(modelMatrix) {\n        if (this.circleCount !== 0) {\n            flushCircle += 1;\n            this.gl.useProgram(this.circleProgram);\n            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.circleVBO);\n            this.gl.bufferData(this.gl.ARRAY_BUFFER, this.circleData, this.gl.STATIC_DRAW);\n            this.gl.vertexAttribPointer(0, 3, this.gl.FLOAT, false, Float32Array.BYTES_PER_ELEMENT * dataPerCircleVertex, 0);\n            this.gl.enableVertexAttribArray(0);\n            this.gl.vertexAttribPointer(1, 2, this.gl.FLOAT, false, Float32Array.BYTES_PER_ELEMENT * dataPerCircleVertex, Float32Array.BYTES_PER_ELEMENT * 3);\n            this.gl.enableVertexAttribArray(1);\n            if (this.camera) {\n                this.gl.uniformMatrix4fv(this.circleUniforms.modelViewLocation, false, (0, matix_1.getRawValues)(this.camera));\n            }\n            this.gl.uniformMatrix4fv(this.circleUniforms.modelLocation, false, (0, matix_1.getRawValues)(modelMatrix));\n            if (this.projection) {\n                this.gl.uniformMatrix4fv(this.circleUniforms.projectionLocation, false, (0, matix_1.getRawValues)(this.projection));\n            }\n            this.gl.drawArrays(this.gl.TRIANGLES, 0, this.circleCount * 6);\n        }\n        this.circleCount = 0;\n    }\n    isDataNotFlushed() {\n        return this.squreCount !== 0 || this.circleCount !== 0;\n    }\n}\nexports.Renderer = Renderer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3JlbmRlcmVyLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGdCQUFnQjtBQUNoQixnQkFBZ0IsbUJBQU8sQ0FBQywwQ0FBZTtBQUN2QyxnQkFBZ0IsbUJBQU8sQ0FBQyxzQ0FBUztBQUNqQyxpQkFBaUIsbUJBQU8sQ0FBQyx3Q0FBVTtBQUNuQyxnQkFBZ0IsbUJBQU8sQ0FBQywwQ0FBZTtBQUN2QywyQkFBMkIsbUJBQU8sQ0FBQyxpRUFBNEI7QUFDL0QsNkJBQTZCLG1CQUFPLENBQUMscUVBQThCO0FBQ25FLDBCQUEwQixtQkFBTyxDQUFDLCtEQUEyQjtBQUM3RCw0QkFBNEIsbUJBQU8sQ0FBQyxtRUFBNkI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmF3ZXIvLi9zcmMvcmVuZGVyL3JlbmRlcmVyLnRzP2M4Y2QiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJlbmRlcmVyID0gdm9pZCAwO1xuY29uc3QgbWF0aXhfMSA9IHJlcXVpcmUoXCIuLi9tYXRoL21hdGl4XCIpO1xuY29uc3QgY29uc3RfMSA9IHJlcXVpcmUoXCIuL2NvbnN0XCIpO1xuY29uc3QgZ2xfYXBpXzEgPSByZXF1aXJlKFwiLi9nbC1hcGlcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4uL21hdGgvdXRpbHNcIik7XG5jb25zdCBsaW5lX3ZlcnRleF9nbHNsXzEgPSByZXF1aXJlKFwiLi4vYXNzZXRzL2xpbmUtdmVydGV4Lmdsc2xcIik7XG5jb25zdCBjaXJjbGVfdmVydGV4X2dsc2xfMSA9IHJlcXVpcmUoXCIuLi9hc3NldHMvY2lyY2xlLXZlcnRleC5nbHNsXCIpO1xuY29uc3QgbGluZV9waXhlbF9nbHNsXzEgPSByZXF1aXJlKFwiLi4vYXNzZXRzL2xpbmUtcGl4ZWwuZ2xzbFwiKTtcbmNvbnN0IGNpcmNsZV9waXhlbF9nbHNsXzEgPSByZXF1aXJlKFwiLi4vYXNzZXRzL2NpcmNsZS1waXhlbC5nbHNsXCIpO1xuY29uc3QgZGF0YVBlclZlcnRleCA9IDM7XG5jb25zdCBkYXRhUGVyTGluZSA9IGRhdGFQZXJWZXJ0ZXggKiA2O1xuY29uc3QgZGF0YVBlckNpcmNsZVZlcnRleCA9IDU7XG5jb25zdCBkYXRhUGVyQ2lyY2xlID0gZGF0YVBlckNpcmNsZVZlcnRleCAqIDY7XG5jb25zdCBsaW5lQnVmZmVyU2l6ZSA9IDEwMDAwO1xuY29uc3QgY2lyY2xlQnVmZmVyU2l6ZSA9IDEwMDAwO1xubGV0IGZsdXNoTGluZSA9IDA7XG5sZXQgZmx1c2hDaXJjbGUgPSAwO1xuY2xhc3MgUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKGdsLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuZ2wgPSBnbDtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBudWxsO1xuICAgICAgICB0aGlzLnNxdXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkobGluZUJ1ZmZlclNpemUgKiBkYXRhUGVyTGluZSk7XG4gICAgICAgIHRoaXMuY2lyY2xlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoY2lyY2xlQnVmZmVyU2l6ZSAqIGRhdGFQZXJDaXJjbGUpO1xuICAgICAgICB0aGlzLnNxdXJlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmNpcmNsZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5zcXVyZVZCTyA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICB0aGlzLnNxdXJlUHJvZ3JhbSA9ICgwLCBnbF9hcGlfMS5jcmVhcmVHTFByb2dyYW0pKGdsLCBsaW5lX3ZlcnRleF9nbHNsXzEuZGVmYXVsdCwgbGluZV9waXhlbF9nbHNsXzEuZGVmYXVsdCk7XG4gICAgICAgIHRoaXMuc3F1cmVVbmlmb3JtcyA9IHtcbiAgICAgICAgICAgIG1vZGVsVmlld0xvY2F0aW9uOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zcXVyZVByb2dyYW0sICdNVicpLFxuICAgICAgICAgICAgbW9kZWxMb2NhdGlvbjogZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc3F1cmVQcm9ncmFtLCAnTU0nKSxcbiAgICAgICAgICAgIHByb2plY3Rpb25Mb2NhdGlvbjogZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc3F1cmVQcm9ncmFtLCAnUCcpLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNpcmNsZVZCTyA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICB0aGlzLmNpcmNsZVByb2dyYW0gPSAoMCwgZ2xfYXBpXzEuY3JlYXJlR0xQcm9ncmFtKShnbCwgY2lyY2xlX3ZlcnRleF9nbHNsXzEuZGVmYXVsdCwgY2lyY2xlX3BpeGVsX2dsc2xfMS5kZWZhdWx0KTtcbiAgICAgICAgdGhpcy5jaXJjbGVVbmlmb3JtcyA9IHtcbiAgICAgICAgICAgIG1vZGVsVmlld0xvY2F0aW9uOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5jaXJjbGVQcm9ncmFtLCAnTVYnKSxcbiAgICAgICAgICAgIG1vZGVsTG9jYXRpb246IGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmNpcmNsZVByb2dyYW0sICdNTScpLFxuICAgICAgICAgICAgcHJvamVjdGlvbkxvY2F0aW9uOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5jaXJjbGVQcm9ncmFtLCAnUCcpLFxuICAgICAgICB9O1xuICAgICAgICBnbC52aWV3cG9ydCgwLCAwLCBzY3JlZW5XaWR0aCwgc2NyZWVuSGVpZ2h0KTtcbiAgICAgICAgZ2wuZW5hYmxlKGdsLkRFUFRIX1RFU1QpO1xuICAgICAgICBnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7XG4gICAgICAgIGdsLmVuYWJsZShnbC5CTEVORCk7XG4gICAgICAgIGdsLmJsZW5kRnVuYyhnbC5TUkNfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuICAgIH1cbiAgICBiZWdpblNjZW5lKHByb2plY3Rpb24sIGNhbWVyYSkge1xuICAgICAgICBmbHVzaExpbmUgPSAwOyAvLyBUT0RPOiBkZWxldGVcbiAgICAgICAgZmx1c2hDaXJjbGUgPSAwO1xuICAgICAgICB0aGlzLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcbiAgICAgICAgaWYgKHRoaXMuaXNEYXRhTm90Rmx1c2hlZCgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlbmRlciBkYXRhIHdhcyBub3QgZmx1c2hlZCBmcm9tIHByZXYgc2NlbmUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNxdXJlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmNpcmNsZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5nbC5jbGVhcih0aGlzLmdsLkNPTE9SX0JVRkZFUl9CSVQgfCB0aGlzLmdsLkRFUFRIX0JVRkZFUl9CSVQpO1xuICAgIH1cbiAgICBkcmF3TGluZShsaW5lKSB7XG4gICAgICAgIGNvbnN0IGxpbmVMZW5ndGggPSBsaW5lLmxlbmd0aDtcbiAgICAgICAgY29uc3QgeFByb2plY3Rpb24gPSAobGluZUxlbmd0aCAqIE1hdGguY29zKCgwLCB1dGlsc18xLnRvUmFkaWFucykobGluZS5yb3RhdGUpKSAvIDIpO1xuICAgICAgICBjb25zdCB5UHJvamVjdGlvbiA9IChsaW5lTGVuZ3RoICogTWF0aC5zaW4oKDAsIHV0aWxzXzEudG9SYWRpYW5zKShsaW5lLnJvdGF0ZSkpIC8gMik7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0ZSA9ICgwLCBtYXRpeF8xLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4KShsaW5lLnN0YXJ0LnggKyB4UHJvamVjdGlvbiwgbGluZS5zdGFydC55ICsgeVByb2plY3Rpb24sIDApO1xuICAgICAgICBjb25zdCByb3RhdGUgPSAoMCwgbWF0aXhfMS5jcmVhdGVSb3RhdGlvbk1hdHJpeCkoKDAsIHV0aWxzXzEudG9SYWRpYW5zKShsaW5lLnJvdGF0ZSksIDAsIDApO1xuICAgICAgICBjb25zdCBzY2FsZSA9ICgwLCBtYXRpeF8xLmNyZWF0ZVNjYWxlTWF0cml4KShsaW5lTGVuZ3RoLCAwLjEsIDEuMCk7XG4gICAgICAgIHRoaXMuZHJhd1NxdXJlKHRyYW5zbGF0ZSwgcm90YXRlLCBzY2FsZSk7XG4gICAgfVxuICAgIGRyYXdTcXVyZSh0cmFuc2xhdGUgPSBudWxsLCByb3RhdGUgPSBudWxsLCBzY2FsZSA9IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuc3F1cmVDb3VudCA9PT0gbGluZUJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIGxldCBtb2RlbE1hdHJpeCA9ICgwLCBtYXRpeF8xLnRyYW5zcG9zZU1hdHJpeCkoKDAsIG1hdGl4XzEuY3JlYXRlVW5pdE1hdHJpeCkoMS4wKSk7XG4gICAgICAgICAgICB0aGlzLmZsdXNoU3F1cmUobW9kZWxNYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsZWZ0VG9wID0gKDAsIG1hdGl4XzEuY3JlYXRlTWF0cml4KShbLTAuNSwgMC41LCBjb25zdF8xLnBhaXRpbmdMYXllciwgMS4wXSwgNCwgMSk7XG4gICAgICAgIGxldCBsZWZ0Qm90dG9tID0gKDAsIG1hdGl4XzEuY3JlYXRlTWF0cml4KShbLTAuNSwgLTAuNSwgY29uc3RfMS5wYWl0aW5nTGF5ZXIsIDEuMF0sIDQsIDEpO1xuICAgICAgICBsZXQgcmlnaHRUb3AgPSAoMCwgbWF0aXhfMS5jcmVhdGVNYXRyaXgpKFswLjUsIDAuNSwgY29uc3RfMS5wYWl0aW5nTGF5ZXIsIDEuMF0sIDQsIDEpO1xuICAgICAgICBsZXQgcmlnaHRCb3R0b20gPSAoMCwgbWF0aXhfMS5jcmVhdGVNYXRyaXgpKFswLjUsIC0wLjUsIGNvbnN0XzEucGFpdGluZ0xheWVyLCAxLjBdLCA0LCAxKTtcbiAgICAgICAgaWYgKHNjYWxlKSB7XG4gICAgICAgICAgICBsZWZ0VG9wID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHNjYWxlLCBsZWZ0VG9wKTtcbiAgICAgICAgICAgIGxlZnRCb3R0b20gPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkoc2NhbGUsIGxlZnRCb3R0b20pO1xuICAgICAgICAgICAgcmlnaHRUb3AgPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkoc2NhbGUsIHJpZ2h0VG9wKTtcbiAgICAgICAgICAgIHJpZ2h0Qm90dG9tID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHNjYWxlLCByaWdodEJvdHRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0ZSkge1xuICAgICAgICAgICAgbGVmdFRvcCA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KShyb3RhdGUsIGxlZnRUb3ApO1xuICAgICAgICAgICAgbGVmdEJvdHRvbSA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KShyb3RhdGUsIGxlZnRCb3R0b20pO1xuICAgICAgICAgICAgcmlnaHRUb3AgPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkocm90YXRlLCByaWdodFRvcCk7XG4gICAgICAgICAgICByaWdodEJvdHRvbSA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KShyb3RhdGUsIHJpZ2h0Qm90dG9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNsYXRlKSB7XG4gICAgICAgICAgICBsZWZ0VG9wID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHRyYW5zbGF0ZSwgbGVmdFRvcCk7XG4gICAgICAgICAgICBsZWZ0Qm90dG9tID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHRyYW5zbGF0ZSwgbGVmdEJvdHRvbSk7XG4gICAgICAgICAgICByaWdodFRvcCA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KSh0cmFuc2xhdGUsIHJpZ2h0VG9wKTtcbiAgICAgICAgICAgIHJpZ2h0Qm90dG9tID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHRyYW5zbGF0ZSwgcmlnaHRCb3R0b20pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDAgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShsZWZ0VG9wLCAwLCAwKTtcbiAgICAgICAgdGhpcy5zcXVyZURhdGFbdGhpcy5zcXVyZUNvdW50ICogZGF0YVBlckxpbmUgKyBkYXRhUGVyVmVydGV4ICogMCArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRUb3AsIDEsIDApO1xuICAgICAgICB0aGlzLnNxdXJlRGF0YVt0aGlzLnNxdXJlQ291bnQgKiBkYXRhUGVyTGluZSArIGRhdGFQZXJWZXJ0ZXggKiAwICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkobGVmdFRvcCwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDEgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMCwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDEgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMSwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDEgKyAyXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDIgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShsZWZ0Qm90dG9tLCAwLCAwKTtcbiAgICAgICAgdGhpcy5zcXVyZURhdGFbdGhpcy5zcXVyZUNvdW50ICogZGF0YVBlckxpbmUgKyBkYXRhUGVyVmVydGV4ICogMiArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDEsIDApO1xuICAgICAgICB0aGlzLnNxdXJlRGF0YVt0aGlzLnNxdXJlQ291bnQgKiBkYXRhUGVyTGluZSArIGRhdGFQZXJWZXJ0ZXggKiAyICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkobGVmdEJvdHRvbSwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDMgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodEJvdHRvbSwgMCwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDMgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodEJvdHRvbSwgMSwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDMgKyAyXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodEJvdHRvbSwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDQgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMCwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDQgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMSwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDQgKyAyXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVEYXRhW3RoaXMuc3F1cmVDb3VudCAqIGRhdGFQZXJMaW5lICsgZGF0YVBlclZlcnRleCAqIDUgKyAwXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShsZWZ0Qm90dG9tLCAwLCAwKTtcbiAgICAgICAgdGhpcy5zcXVyZURhdGFbdGhpcy5zcXVyZUNvdW50ICogZGF0YVBlckxpbmUgKyBkYXRhUGVyVmVydGV4ICogNSArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDEsIDApO1xuICAgICAgICB0aGlzLnNxdXJlRGF0YVt0aGlzLnNxdXJlQ291bnQgKiBkYXRhUGVyTGluZSArIGRhdGFQZXJWZXJ0ZXggKiA1ICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkobGVmdEJvdHRvbSwgMiwgMCk7XG4gICAgICAgIHRoaXMuc3F1cmVDb3VudCArPSAxO1xuICAgIH1cbiAgICBkcmF3Q2lyY2xlKGNpcmNsZSkge1xuICAgICAgICBpZiAodGhpcy5jaXJjbGVDb3VudCA9PT0gY2lyY2xlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgbGV0IG1vZGVsTWF0cml4ID0gKDAsIG1hdGl4XzEudHJhbnNwb3NlTWF0cml4KSgoMCwgbWF0aXhfMS5jcmVhdGVVbml0TWF0cml4KSgxLjApKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hDaXJjbGUobW9kZWxNYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsZWZ0VG9wID0gKDAsIG1hdGl4XzEuY3JlYXRlTWF0cml4KShbLTAuNSwgMC41LCBjb25zdF8xLnBhaXRpbmdMYXllciwgMS4wXSwgNCwgMSk7XG4gICAgICAgIGxldCBsZWZ0Qm90dG9tID0gKDAsIG1hdGl4XzEuY3JlYXRlTWF0cml4KShbLTAuNSwgLTAuNSwgY29uc3RfMS5wYWl0aW5nTGF5ZXIsIDEuMF0sIDQsIDEpO1xuICAgICAgICBsZXQgcmlnaHRUb3AgPSAoMCwgbWF0aXhfMS5jcmVhdGVNYXRyaXgpKFswLjUsIDAuNSwgY29uc3RfMS5wYWl0aW5nTGF5ZXIsIDEuMF0sIDQsIDEpO1xuICAgICAgICBsZXQgcmlnaHRCb3R0b20gPSAoMCwgbWF0aXhfMS5jcmVhdGVNYXRyaXgpKFswLjUsIC0wLjUsIGNvbnN0XzEucGFpdGluZ0xheWVyLCAxLjBdLCA0LCAxKTtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlID0gKDAsIG1hdGl4XzEuY3JlYXRlVHJhbnNsYXRpb25NYXRyaXgpKGNpcmNsZS5vcmlnaW5YLCBjaXJjbGUub3JpZ2luWSwgMCk7XG4gICAgICAgIC8vIGNvbnN0IHJvdGF0ZSA9IGNyZWF0ZVJvdGF0aW9uTWF0cml4KDAsIDAsIDApO1xuICAgICAgICBjb25zdCBzY2FsZSA9ICgwLCBtYXRpeF8xLmNyZWF0ZVNjYWxlTWF0cml4KShjaXJjbGUucmFkaXVzICogMiwgY2lyY2xlLnJhZGl1cyAqIDIsIDEuMCk7XG4gICAgICAgIGxlZnRUb3AgPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkoc2NhbGUsIGxlZnRUb3ApO1xuICAgICAgICBsZWZ0Qm90dG9tID0gKDAsIG1hdGl4XzEubXVsdGlwbHlNYXRyaXgpKHNjYWxlLCBsZWZ0Qm90dG9tKTtcbiAgICAgICAgcmlnaHRUb3AgPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkoc2NhbGUsIHJpZ2h0VG9wKTtcbiAgICAgICAgcmlnaHRCb3R0b20gPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkoc2NhbGUsIHJpZ2h0Qm90dG9tKTtcbiAgICAgICAgLy8gbGVmdFRvcCA9ICBtdWx0aXBseU1hdHJpeChyb3RhdGUsIGxlZnRUb3ApO1xuICAgICAgICAvLyBsZWZ0Qm90dG9tID0gbXVsdGlwbHlNYXRyaXgocm90YXRlLCBsZWZ0Qm90dG9tKTtcbiAgICAgICAgLy8gcmlnaHRUb3AgPSAgbXVsdGlwbHlNYXRyaXgocm90YXRlLCByaWdodFRvcCk7XG4gICAgICAgIC8vIHJpZ2h0Qm90dG9tID0gbXVsdGlwbHlNYXRyaXgocm90YXRlLCByaWdodEJvdHRvbSk7XG4gICAgICAgIGxlZnRUb3AgPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkodHJhbnNsYXRlLCBsZWZ0VG9wKTtcbiAgICAgICAgbGVmdEJvdHRvbSA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KSh0cmFuc2xhdGUsIGxlZnRCb3R0b20pO1xuICAgICAgICByaWdodFRvcCA9ICgwLCBtYXRpeF8xLm11bHRpcGx5TWF0cml4KSh0cmFuc2xhdGUsIHJpZ2h0VG9wKTtcbiAgICAgICAgcmlnaHRCb3R0b20gPSAoMCwgbWF0aXhfMS5tdWx0aXBseU1hdHJpeCkodHJhbnNsYXRlLCByaWdodEJvdHRvbSk7XG4gICAgICAgIGNvbnN0IGRhdGFQZXJWZXJ0ZXggPSA1O1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMCArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRUb3AsIDAsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMCArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRUb3AsIDEsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMCArIDJdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRUb3AsIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMCArIDNdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMCArIDRdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMSArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKHJpZ2h0VG9wLCAwLCAwKTtcbiAgICAgICAgdGhpcy5jaXJjbGVEYXRhW3RoaXMuY2lyY2xlQ291bnQgKiBkYXRhUGVyQ2lyY2xlICsgZGF0YVBlclZlcnRleCAqIDEgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMSwgMCk7XG4gICAgICAgIHRoaXMuY2lyY2xlRGF0YVt0aGlzLmNpcmNsZUNvdW50ICogZGF0YVBlckNpcmNsZSArIGRhdGFQZXJWZXJ0ZXggKiAxICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkocmlnaHRUb3AsIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMSArIDNdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMSArIDRdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMiArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDAsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMiArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDEsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMiArIDJdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMiArIDNdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMiArIDRdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMyArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKHJpZ2h0Qm90dG9tLCAwLCAwKTtcbiAgICAgICAgdGhpcy5jaXJjbGVEYXRhW3RoaXMuY2lyY2xlQ291bnQgKiBkYXRhUGVyQ2lyY2xlICsgZGF0YVBlclZlcnRleCAqIDMgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodEJvdHRvbSwgMSwgMCk7XG4gICAgICAgIHRoaXMuY2lyY2xlRGF0YVt0aGlzLmNpcmNsZUNvdW50ICogZGF0YVBlckNpcmNsZSArIGRhdGFQZXJWZXJ0ZXggKiAzICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkocmlnaHRCb3R0b20sIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMyArIDNdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogMyArIDRdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNCArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKHJpZ2h0VG9wLCAwLCAwKTtcbiAgICAgICAgdGhpcy5jaXJjbGVEYXRhW3RoaXMuY2lyY2xlQ291bnQgKiBkYXRhUGVyQ2lyY2xlICsgZGF0YVBlclZlcnRleCAqIDQgKyAxXSA9ICgwLCBtYXRpeF8xLmdldE1hdHJpeFZhbHVlKShyaWdodFRvcCwgMSwgMCk7XG4gICAgICAgIHRoaXMuY2lyY2xlRGF0YVt0aGlzLmNpcmNsZUNvdW50ICogZGF0YVBlckNpcmNsZSArIGRhdGFQZXJWZXJ0ZXggKiA0ICsgMl0gPSAoMCwgbWF0aXhfMS5nZXRNYXRyaXhWYWx1ZSkocmlnaHRUb3AsIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNCArIDNdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNCArIDRdID0gMS4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNSArIDBdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDAsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNSArIDFdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDEsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNSArIDJdID0gKDAsIG1hdGl4XzEuZ2V0TWF0cml4VmFsdWUpKGxlZnRCb3R0b20sIDIsIDApO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNSArIDNdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZURhdGFbdGhpcy5jaXJjbGVDb3VudCAqIGRhdGFQZXJDaXJjbGUgKyBkYXRhUGVyVmVydGV4ICogNSArIDRdID0gMC4wO1xuICAgICAgICB0aGlzLmNpcmNsZUNvdW50ICs9IDE7XG4gICAgfVxuICAgIGVuZFNjZW5lKCkge1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIHRoaXMucHJvamVjdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zcXVyZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5jaXJjbGVDb3VudCA9IDA7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdmbHVzaCBzcXVyZSBjb3VudCcsIGZsdXNoTGluZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdmbHVzaCBjaXJjbGUgY291bnQnLCBmbHVzaENpcmNsZSk7XG4gICAgICAgIGZsdXNoTGluZSA9IDA7XG4gICAgICAgIGZsdXNoQ2lyY2xlID0gMDtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGxldCBtb2RlbE1hdHJpeCA9ICgwLCBtYXRpeF8xLnRyYW5zcG9zZU1hdHJpeCkoKDAsIG1hdGl4XzEuY3JlYXRlVW5pdE1hdHJpeCkoMS4wKSk7XG4gICAgICAgIHRoaXMuZmx1c2hTcXVyZShtb2RlbE1hdHJpeCk7XG4gICAgICAgIHRoaXMuZmx1c2hDaXJjbGUobW9kZWxNYXRyaXgpO1xuICAgIH1cbiAgICBmbHVzaFNxdXJlKG1vZGVsTWF0cml4KSB7XG4gICAgICAgIGlmICh0aGlzLnNxdXJlQ291bnQgIT09IDApIHtcbiAgICAgICAgICAgIGZsdXNoTGluZSArPSAxO1xuICAgICAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuc3F1cmVQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgdGhpcy5zcXVyZVZCTyk7XG4gICAgICAgICAgICB0aGlzLmdsLmJ1ZmZlckRhdGEodGhpcy5nbC5BUlJBWV9CVUZGRVIsIHRoaXMuc3F1cmVEYXRhLCB0aGlzLmdsLlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcigwLCAzLCB0aGlzLmdsLkZMT0FULCBmYWxzZSwgRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UICogZGF0YVBlclZlcnRleCwgMCk7XG4gICAgICAgICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KDApO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc3F1cmVVbmlmb3Jtcy5tb2RlbFZpZXdMb2NhdGlvbiwgZmFsc2UsICgwLCBtYXRpeF8xLmdldFJhd1ZhbHVlcykodGhpcy5jYW1lcmEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNxdXJlVW5pZm9ybXMubW9kZWxMb2NhdGlvbiwgZmFsc2UsICgwLCBtYXRpeF8xLmdldFJhd1ZhbHVlcykobW9kZWxNYXRyaXgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zcXVyZVVuaWZvcm1zLnByb2plY3Rpb25Mb2NhdGlvbiwgZmFsc2UsICgwLCBtYXRpeF8xLmdldFJhd1ZhbHVlcykodGhpcy5wcm9qZWN0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdsLmRyYXdBcnJheXModGhpcy5nbC5UUklBTkdMRVMsIDAsIHRoaXMuc3F1cmVDb3VudCAqIDYpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3F1cmVDb3VudCA9IDA7XG4gICAgfVxuICAgIGZsdXNoQ2lyY2xlKG1vZGVsTWF0cml4KSB7XG4gICAgICAgIGlmICh0aGlzLmNpcmNsZUNvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICBmbHVzaENpcmNsZSArPSAxO1xuICAgICAgICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMuY2lyY2xlUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5BUlJBWV9CVUZGRVIsIHRoaXMuY2lyY2xlVkJPKTtcbiAgICAgICAgICAgIHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUiwgdGhpcy5jaXJjbGVEYXRhLCB0aGlzLmdsLlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIHRoaXMuZ2wudmVydGV4QXR0cmliUG9pbnRlcigwLCAzLCB0aGlzLmdsLkZMT0FULCBmYWxzZSwgRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UICogZGF0YVBlckNpcmNsZVZlcnRleCwgMCk7XG4gICAgICAgICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KDApO1xuICAgICAgICAgICAgdGhpcy5nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKDEsIDIsIHRoaXMuZ2wuRkxPQVQsIGZhbHNlLCBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgKiBkYXRhUGVyQ2lyY2xlVmVydGV4LCBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgKiAzKTtcbiAgICAgICAgICAgIHRoaXMuZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoMSk7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW1lcmEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5jaXJjbGVVbmlmb3Jtcy5tb2RlbFZpZXdMb2NhdGlvbiwgZmFsc2UsICgwLCBtYXRpeF8xLmdldFJhd1ZhbHVlcykodGhpcy5jYW1lcmEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLmNpcmNsZVVuaWZvcm1zLm1vZGVsTG9jYXRpb24sIGZhbHNlLCAoMCwgbWF0aXhfMS5nZXRSYXdWYWx1ZXMpKG1vZGVsTWF0cml4KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuY2lyY2xlVW5pZm9ybXMucHJvamVjdGlvbkxvY2F0aW9uLCBmYWxzZSwgKDAsIG1hdGl4XzEuZ2V0UmF3VmFsdWVzKSh0aGlzLnByb2plY3Rpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2wuZHJhd0FycmF5cyh0aGlzLmdsLlRSSUFOR0xFUywgMCwgdGhpcy5jaXJjbGVDb3VudCAqIDYpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2lyY2xlQ291bnQgPSAwO1xuICAgIH1cbiAgICBpc0RhdGFOb3RGbHVzaGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcXVyZUNvdW50ICE9PSAwIHx8IHRoaXMuY2lyY2xlQ291bnQgIT09IDA7XG4gICAgfVxufVxuZXhwb3J0cy5SZW5kZXJlciA9IFJlbmRlcmVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/renderer.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;